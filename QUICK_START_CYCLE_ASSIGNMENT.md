# ğŸ¯ QUICK START GUIDE - Cycle-Based Task Assignment

## ğŸ“ Truy cáº­p trang má»›i

### URL Pattern:

```
/quanlycongviec/giao-nhiem-vu-chu-ky/{employeeId}
```

### VÃ­ dá»¥:

```
http://localhost:3000/quanlycongviec/giao-nhiem-vu-chu-ky/66b1dba74f79822a4752d8f8
```

---

## ğŸš€ Workflow nhanh

### 1ï¸âƒ£ Chá»n chu ká»³

- Dropdown á»Ÿ Ä‘áº§u trang â†’ Chá»n chu ká»³ Ä‘Ã¡nh giÃ¡ (Q1/2025, Q2/2025, ...)
- Dá»¯ liá»‡u sáº½ tá»± Ä‘á»™ng load

### 2ï¸âƒ£ GÃ¡n nhiá»‡m vá»¥

**CÃ¡ch 1: ThÃªm thá»§ cÃ´ng**

- Click [+] á»Ÿ cá»™t trÃ¡i (Danh sÃ¡ch nhiá»‡m vá»¥)
- Nhiá»‡m vá»¥ tá»± Ä‘á»™ng chuyá»ƒn sang cá»™t pháº£i
- Äá»™ khÃ³ máº·c Ä‘á»‹nh Ä‘Æ°á»£c Ä‘iá»n sáºµn

**CÃ¡ch 2: Copy tá»« chu ká»³ trÆ°á»›c**

- Chá»n "Copy tá»« chu ká»³" dropdown
- Click [Copy]
- Táº¥t cáº£ nhiá»‡m vá»¥ + Ä‘á»™ khÃ³ Ä‘Æ°á»£c sao chÃ©p

### 3ï¸âƒ£ Äiá»u chá»‰nh Ä‘á»™ khÃ³

- Nháº­p trá»±c tiáº¿p vÃ o Ã´ "Äá»™ khÃ³ thá»±c táº¿"
- Hoáº·c dÃ¹ng mÅ©i tÃªn lÃªn/xuá»‘ng (bÆ°á»›c nháº£y 0.5)
- MÃ u chip tá»± Ä‘á»™ng Ä‘á»•i:
  - ğŸŸ¢ Xanh: 1.0 - 3.0 (Dá»…)
  - ğŸŸ  Cam: 3.5 - 7.0 (Trung bÃ¬nh)
  - ğŸ”´ Äá»: 7.5 - 10.0 (KhÃ³)

### 4ï¸âƒ£ XÃ³a nhiá»‡m vá»¥

- Click [X] á»Ÿ gÃ³c pháº£i nhiá»‡m vá»¥
- Nhiá»‡m vá»¥ tá»± Ä‘á»™ng quay láº¡i cá»™t trÃ¡i

### 5ï¸âƒ£ LÆ°u thay Ä‘á»•i

- Click [ğŸ’¾ LÆ°u thay Ä‘á»•i] á»Ÿ gÃ³c pháº£i cá»™t pháº£i
- Chá» spinner xoay â†’ ThÃ´ng bÃ¡o thÃ nh cÃ´ng

---

## ğŸ¨ Giao diá»‡n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Giao nhiá»‡m vá»¥ theo chu ká»³                          â”‚
â”‚  NhÃ¢n viÃªn: Nguyá»…n VÄƒn A (NV001) - Khoa Ná»™i           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Chu ká»³: Q1/2025 â–¼]  [Copy: Q4/2024 â–¼] [Copy]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“š Nhiá»‡m vá»¥ kháº£ dá»¥ng â”‚  ğŸ“ ÄÃ£ gÃ¡n (3)      [ğŸ’¾ LÆ°u]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜ BÃ¡o cÃ¡o tuáº§n   [+] â”‚  1. KhÃ¡m bá»‡nh           [X]   â”‚
â”‚  â˜ Quáº£n lÃ½ kho    [+] â”‚     Äá»™ khÃ³: [7.5] ğŸ”´          â”‚
â”‚  â˜ HÆ°á»›ng dáº«n SV   [+] â”‚                                â”‚
â”‚                       â”‚  2. BÃ¡o cÃ¡o thÃ¡ng        [X]   â”‚
â”‚                       â”‚     Äá»™ khÃ³: [8.0] ğŸ”´          â”‚
â”‚                       â”‚                                â”‚
â”‚                       â”‚  Tá»•ng: 3 nhiá»‡m vá»¥ | Äá»™ khÃ³: 21.5â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Validation tá»± Ä‘á»™ng

### âŒ KhÃ´ng Ä‘Æ°á»£c phÃ©p:

- TrÃ¹ng nhiá»‡m vá»¥ trong cÃ¹ng chu ká»³
- Äá»™ khÃ³ < 1.0 hoáº·c > 10.0
- Äá»™ khÃ³ vá»›i > 1 chá»¯ sá»‘ tháº­p phÃ¢n (VD: 7.55)
- Copy vÃ o chu ká»³ Ä‘Ã£ cÃ³ dá»¯ liá»‡u

### âœ… ÄÆ°á»£c phÃ©p:

- CÃ¹ng nhiá»‡m vá»¥ á»Ÿ nhiá»u chu ká»³ khÃ¡c nhau
- Äá»™ khÃ³ khÃ¡c vá»›i máº·c Ä‘á»‹nh
- XÃ³a vÃ  thÃªm láº¡i nhiá»‡m vá»¥
- Chá»‰nh sá»­a sau khi copy

---

## ğŸ”§ API Endpoints (Backend)

### GET: Láº¥y danh sÃ¡ch

```
GET /api/workmanagement/giao-nhiem-vu/nhan-vien/:employeeId/by-cycle?chuKyId=xxx
```

### PUT: LÆ°u thay Ä‘á»•i

```
PUT /api/workmanagement/giao-nhiem-vu/nhan-vien/:employeeId/cycle-assignments
Body: {
  chuKyId: "xxx",
  tasks: [
    { NhiemVuThuongQuyID: "yyy", MucDoKho: 7.5 }
  ]
}
```

### POST: Copy chu ká»³

```
POST /api/workmanagement/giao-nhiem-vu/nhan-vien/:employeeId/copy-cycle
Body: {
  fromChuKyId: "xxx",
  toChuKyId: "yyy"
}
```

---

## ğŸ› Troubleshooting

**Q: KhÃ´ng tháº¥y chu ká»³ trong dropdown?**

- Kiá»ƒm tra backend Ä‘ang cháº¡y
- VÃ o `/api/workmanagement/chu-ky-danh-gia` Ä‘á»ƒ xem dá»¯ liá»‡u

**Q: LÆ°u tháº¥t báº¡i?**

- Má»Ÿ Console (F12) â†’ Tab Network
- Xem response error tá»« API
- ThÆ°á»ng do trÃ¹ng nhiá»‡m vá»¥ hoáº·c Ä‘á»™ khÃ³ khÃ´ng há»£p lá»‡

**Q: Copy button bá»‹ disable?**

- Pháº£i chá»n chu ká»³ nguá»“n trÆ°á»›c
- Chu ká»³ nguá»“n â‰  chu ká»³ Ä‘Ã­ch
- Chu ká»³ nguá»“n pháº£i cÃ³ dá»¯ liá»‡u

---

## ğŸ“Š Data Flow

```mermaid
sequenceDiagram
    User->>Frontend: Chá»n chu ká»³
    Frontend->>Backend: GET /by-cycle?chuKyId=xxx
    Backend->>DB: Query assignments + duties
    DB->>Backend: Return data
    Backend->>Frontend: { assignedTasks, availableDuties }
    Frontend->>User: Hiá»ƒn thá»‹ 2 cá»™t

    User->>Frontend: Click [+] thÃªm nhiá»‡m vá»¥
    Frontend->>Frontend: Optimistic update UI
    User->>Frontend: Chá»‰nh Ä‘á»™ khÃ³
    Frontend->>Frontend: Local state update
    User->>Frontend: Click [LÆ°u]
    Frontend->>Backend: PUT /cycle-assignments
    Backend->>DB: Batch update (Add/Update/Delete)
    DB->>Backend: Success
    Backend->>Frontend: Updated data
    Frontend->>User: Toast thÃ nh cÃ´ng
```

---

## âš¡ Tips & Tricks

1. **Nhanh nháº¥t**: Copy tá»« chu ká»³ trÆ°á»›c â†’ Chá»‰nh má»™t vÃ i nhiá»‡m vá»¥ â†’ LÆ°u
2. **ChÃ­nh xÃ¡c nháº¥t**: ThÃªm tá»«ng nhiá»‡m vá»¥ thá»§ cÃ´ng â†’ Äiá»u chá»‰nh Ä‘á»™ khÃ³ cáº©n tháº­n
3. **Kiá»ƒm tra tá»•ng Ä‘á»™ khÃ³**: Footer cá»™t pháº£i hiá»ƒn thá»‹ tá»•ng sá»‘
4. **Undo**: Náº¿u sai â†’ LÃ m má»›i trang (F5) â†’ Dá»¯ liá»‡u DB khÃ´ng thay Ä‘á»•i
5. **Mobile**: Cá»™t xáº¿p dá»c â†’ Scroll lÃªn xuá»‘ng Ä‘á»ƒ xem

---

## ğŸ¯ Next Steps

1. Test trÃªn mÃ´i trÆ°á»ng dev
2. Táº¡o chu ká»³ máº«u náº¿u chÆ°a cÃ³
3. Thá»­ copy giá»¯a cÃ¡c chu ká»³
4. Kiá»ƒm tra bÃ¡o cÃ¡o KPI cÃ³ nháº­n Ä‘Ãºng Ä‘á»™ khÃ³ khÃ´ng
5. Deploy lÃªn production

---

**âœ¨ Happy coding! Tháº¯c máº¯c liÃªn há»‡ dev team.**
