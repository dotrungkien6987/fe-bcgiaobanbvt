# ğŸ“‹ Nghiá»‡p Vá»¥ Chi Tiáº¿t - Há»‡ Thá»‘ng YÃªu Cáº§u

> **Tráº¡ng thÃ¡i**: âœ… ÄÃ£ thá»‘ng nháº¥t  
> **Cáº­p nháº­t**: 30/11/2025  
> **Brainstorm sessions**: Journey #1 â†’ #6 hoÃ n thÃ nh

---

## Tá»•ng Káº¿t Nhanh

### State Machine (5 Tráº¡ng ThÃ¡i)

```
MOI â†’ DANG_XU_LY â†’ DA_HOAN_THANH â†’ DA_DONG
 â”‚         â”‚              â”‚            â”‚
 â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
 â”‚       (YEU_CAU_XU_LY_TIEP)          â”‚
 â”‚                                     â”‚
 â””â”€â”€â”€â”€â–º TU_CHOI â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚          (7 ngÃ y má»Ÿ láº¡i)
           â””â”€â”€â–º MOI (Appeal)
```

### CÃ¡c Quyáº¿t Äá»‹nh Quan Trá»ng

| Chá»§ Ä‘á»            | Quyáº¿t Ä‘á»‹nh                                                   |
| ----------------- | ------------------------------------------------------------ |
| **Sá»‘ tráº¡ng thÃ¡i** | 5 states (gá»™p DA_TIEP_NHAN vÃ o DANG_XU_LY)                   |
| **XÃ³a yÃªu cáº§u**   | Hard delete khi MOI, khÃ´ng xÃ³a sau Ä‘Ã³                        |
| **Tá»± Ä‘á»™ng Ä‘Ã³ng**  | 3 ngÃ y sau DA_HOAN_THANH (Agenda.js), máº·c Ä‘á»‹nh 5â­           |
| **Má»Ÿ láº¡i**        | Trong 7 ngÃ y tá»« DA_DONG, báº¯t buá»™c lÃ½ do                      |
| **Escalate**      | "Nháº¯c láº¡i" (3/ngÃ y) + "BÃ¡o quáº£n lÃ½" (1/ngÃ y)                 |
| **Comment**       | Má»i tráº¡ng thÃ¡i, ai thuá»™c workflow Ä‘á»u Ä‘Æ°á»£c                   |
| **TB Comment**    | Chá»‰ NguoiGui + NguoiXuLy, KHÃ”NG gá»­i Ä‘iá»u phá»‘i                |
| **ÄÃ¡nh giÃ¡**      | 1-5â­, Ä‘Ã¡nh giÃ¡ = tá»± Ä‘á»™ng Ä‘Ã³ng, < 3â­ báº¯t buá»™c nháº­n xÃ©t      |
| **Dashboard**     | Trang riÃªng `/yeucau/dashboard`, Admin + Quáº£n lÃ½ + Äiá»u phá»‘i |

---

## Má»¥c Lá»¥c

1. [Pháº§n 1: Danh Má»¥c & Cáº¥u HÃ¬nh](#pháº§n-1-danh-má»¥c--cáº¥u-hÃ¬nh) âœ…
2. [Pháº§n 2: Táº¡o YÃªu Cáº§u](#pháº§n-2-táº¡o-yÃªu-cáº§u) âœ…
3. [Pháº§n 3: Tiáº¿p Nháº­n & Äiá»u Phá»‘i](#pháº§n-3-tiáº¿p-nháº­n--Ä‘iá»u-phá»‘i) âœ…
4. [Pháº§n 4: Xá»­ LÃ½ & HoÃ n ThÃ nh](#pháº§n-4-xá»­-lÃ½--hoÃ n-thÃ nh) âœ…
5. [Pháº§n 5: ÄÃ¡nh GiÃ¡ & Dashboard](#pháº§n-5-Ä‘Ã¡nh-giÃ¡--dashboard) âœ…
6. [Pháº§n 6: Danh SÃ¡ch Notification Templates](#pháº§n-6-danh-sÃ¡ch-notification-templates) âœ…

---

## Pháº§n 1: Danh Má»¥c & Cáº¥u HÃ¬nh

### 1.1. Danh Má»¥c Loáº¡i YÃªu Cáº§u (DanhMucYeuCau)

Má»—i khoa tá»± quáº£n lÃ½ danh má»¥c loáº¡i yÃªu cáº§u mÃ  khoa cÃ³ thá»ƒ tiáº¿p nháº­n.

**Quyá»n truy cáº­p:**

- ğŸ‘‘ **Admin**: Chá»n Ä‘Æ°á»£c báº¥t ká»³ khoa nÃ o (Autocomplete)
- ğŸ¢ **Quáº£n lÃ½ khoa**: Tá»± Ä‘á»™ng chá»n khoa cá»§a mÃ¬nh (khÃ´ng Ä‘á»•i Ä‘Æ°á»£c)
- âŒ NhÃ¢n viÃªn thÆ°á»ng: KhÃ´ng truy cáº­p Ä‘Æ°á»£c

> **LÆ°u Ã½**: Quáº£n lÃ½ khoa Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh qua `CauHinhThongBaoKhoa.DanhSachQuanLyKhoa`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DANH Má»¤C YÃŠU Cáº¦U Cá»¦A KHOA CNTT                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ğŸ“‹ Loáº¡i yÃªu cáº§u          â”‚ â±ï¸ Thá»i gian dá»± kiáº¿n              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚   ğŸ”§ Sá»­a lá»—i pháº§n má»m      â”‚ 60 phÃºt                           â”‚
â”‚   ğŸ–¥ï¸ Láº¯p Ä‘áº·t mÃ¡y tÃ­nh      â”‚ 120 phÃºt                          â”‚
â”‚   ğŸ“‚ Má»Ÿ bá»‡nh Ã¡n Ä‘iá»‡n tá»­    â”‚ 30 phÃºt                           â”‚
â”‚   ğŸ”‘ Reset máº­t kháº©u        â”‚ 15 phÃºt                           â”‚
â”‚   ğŸ”Œ Sá»­a chá»¯a thiáº¿t bá»‹     â”‚ 240 phÃºt                          â”‚
â”‚                                                                  â”‚
â”‚   â• [ThÃªm loáº¡i má»›i]                                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CÃ¡c field:**

- `TenLoaiYeuCau`: TÃªn loáº¡i yÃªu cáº§u (VD: "Sá»­a lá»—i pháº§n má»m")
- `ThoiGianDuKien`: Sá»‘ Ä‘Æ¡n vá»‹ thá»i gian (VD: 60)
- `DonViThoiGian`: ÄÆ¡n vá»‹ (PHUT / GIO / NGAY)
- `TrangThai`: HOAT_DONG / NGUNG_HOAT_DONG

### 1.2. Cáº¥u HÃ¬nh ThÃ´ng BÃ¡o Khoa (CauHinhThongBaoKhoa)

Má»—i khoa cÃ³ **2 danh sÃ¡ch** cáº§n cáº¥u hÃ¬nh:

#### 1.2.1. Danh sÃ¡ch Quáº£n lÃ½ khoa (`DanhSachQuanLyKhoa`)

Nhá»¯ng ngÆ°á»i cÃ³ quyá»n:

- Cáº¥u hÃ¬nh danh má»¥c yÃªu cáº§u (CRUD)
- Thay Ä‘á»•i danh sÃ¡ch ngÆ°á»i Ä‘iá»u phá»‘i
- Thay Ä‘á»•i danh sÃ¡ch quáº£n lÃ½ khoa (ká»ƒ cáº£ bá» chÃ­nh mÃ¬nh)

> **LÆ°u Ã½**: Quáº£n lÃ½ khoa **KHÃ”NG tá»± Ä‘á»™ng** lÃ  ngÆ°á»i Ä‘iá»u phá»‘i (trÃ¡nh spam thÃ´ng bÃ¡o)

#### 1.2.2. Danh sÃ¡ch NgÆ°á»i Ä‘iá»u phá»‘i (`DanhSachNguoiDieuPhoi`)

Nhá»¯ng ngÆ°á»i:

- Nháº­n thÃ´ng bÃ¡o khi cÃ³ yÃªu cáº§u má»›i gá»­i Ä‘áº¿n KHOA
- CÃ³ quyá»n Tiáº¿p nháº­n / Tá»« chá»‘i / Äiá»u phá»‘i yÃªu cáº§u

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Cáº¤U HÃŒNH KHOA - KHOA CNTT                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ğŸ‘‘ QUáº¢N LÃ KHOA (cÃ³ quyá»n cáº¥u hÃ¬nh danh má»¥c + phÃ¢n quyá»n):   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ â˜‘ï¸ Nguyá»…n VÄƒn A - TrÆ°á»Ÿng khoa           â”‚                   â”‚
â”‚   â”‚ â˜ Tráº§n Thá»‹ B - PhÃ³ khoa                    â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â”‚   ğŸ“¬ NGÆ¯á»œI ÄIá»€U PHá»I (nháº­n TB + tiáº¿p nháº­n/Ä‘iá»u phá»‘i yÃªu cáº§u): â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ â˜‘ï¸ Tráº§n Thá»‹ B - PhÃ³ khoa                    â”‚                   â”‚
â”‚   â”‚ â˜‘ï¸ LÃª VÄƒn C - Ká»¹ thuáº­t viÃªn               â”‚                   â”‚
â”‚   â”‚ â˜ Pháº¡m Thá»‹ D - Ká»¹ thuáº­t viÃªn              â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â”‚   âš ï¸ LÆ°u Ã½: Quáº£n lÃ½ khoa KHÃ”NG tá»± Ä‘á»™ng lÃ  ngÆ°á»i Ä‘iá»u phá»‘i      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3. LÃ½ Do Tá»« Chá»‘i (LyDoTuChoi)

Danh má»¥c **chung toÃ n há»‡ thá»‘ng** (khÃ´ng riÃªng tá»«ng khoa).

**Quyá»n truy cáº­p:** Chá»‰ Admin/SuperAdmin

**Seed data máº·c Ä‘á»‹nh:**

```
1. KhÃ´ng Ä‘á»§ thÃ´ng tin
2. KhÃ´ng thuá»™c pháº¡m vi xá»­ lÃ½
3. YÃªu cáº§u trÃ¹ng láº·p
4. Thiáº¿u tÃ i nguyÃªn/thiáº¿t bá»‹
5. LÃ½ do khÃ¡c (kÃ¨m ghi chÃº)
```

> **LÆ°u Ã½**: KhÃ´ng hard delete, chá»‰ soft delete (Ä‘á»•i tráº¡ng thÃ¡i) vÃ¬ cÃ²n lá»‹ch sá»­ tham chiáº¿u.

---

## Pháº§n 2: Táº¡o YÃªu Cáº§u

### 2.1. Flow Táº¡o YÃªu Cáº§u (2 hÆ°á»›ng)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                FLOW Táº O YÃŠU Cáº¦U (2 hÆ°á»›ng)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ğŸ‘¤ NhÃ¢n viÃªn táº¡o yÃªu cáº§u                                      â”‚
â”‚         â”‚                                                        â”‚
â”‚         â”‚ 1. Chá»n khoa nháº­n                                      â”‚
â”‚         â–¼                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚  Gá»­i Ä‘áº¿n:                               â”‚                   â”‚
â”‚   â”‚  â—‹ Khoa (chung)    â—‹ CÃ¡ nhÃ¢n (chá»‰ Ä‘á»‹nh) â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                â”‚               â”‚                                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚       â–¼                                 â–¼                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ Gá»¬I Äáº¾N KHOAâ”‚               â”‚ Gá»¬I Äáº¾N CÃ NHÃ‚N â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚          â”‚                               â”‚                       â”‚
â”‚          â”‚                               â”‚ Chá»n nhÃ¢n viÃªn        â”‚
â”‚          â”‚                               â”‚ trong khoa            â”‚
â”‚          â”‚                               â–¼                       â”‚
â”‚          â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚          â”‚                       â”‚ Dropdown NV     â”‚            â”‚
â”‚          â”‚                       â”‚ (cá»§a khoa Ä‘Ã£    â”‚            â”‚
â”‚          â”‚                       â”‚  chá»n)          â”‚            â”‚
â”‚          â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚          â”‚                                â”‚                      â”‚
â”‚          â–¼                                â–¼                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚ Form tiáº¿p theo:                                 â”‚           â”‚
â”‚   â”‚ â”œâ”€â”€ Chá»n loáº¡i yÃªu cáº§u (tá»« danh má»¥c khoa)       â”‚           â”‚
â”‚   â”‚ â”œâ”€â”€ TiÃªu Ä‘á» * (báº¯t buá»™c)                       â”‚           â”‚
â”‚   â”‚ â”œâ”€â”€ MÃ´ táº£ * (báº¯t buá»™c)                         â”‚           â”‚
â”‚   â”‚ â””â”€â”€ File Ä‘Ã­nh kÃ¨m (tÃ¹y chá»n)                   â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                          â”‚                                       â”‚
â”‚                          â”‚ Gá»­i                                   â”‚
â”‚                          â–¼                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚ Há»† THá»NG Xá»¬ LÃ:                                 â”‚           â”‚
â”‚   â”‚                                                  â”‚           â”‚
â”‚   â”‚ Náº¿u Gá»¬I Äáº¾N KHOA:                               â”‚           â”‚
â”‚   â”‚ â”œâ”€â”€ LoaiNguoiNhan = "KHOA"                      â”‚           â”‚
â”‚   â”‚ â”œâ”€â”€ NguoiNhanID = null                          â”‚           â”‚
â”‚   â”‚ â”œâ”€â”€ TrangThai = "MOI"                           â”‚           â”‚
â”‚   â”‚ â””â”€â”€ ThÃ´ng bÃ¡o â†’ NgÆ°á»i Ä‘iá»u phá»‘i (theo cáº¥u hÃ¬nh) â”‚           â”‚
â”‚   â”‚                                                  â”‚           â”‚
â”‚   â”‚ Náº¿u Gá»¬I Äáº¾N CÃ NHÃ‚N:                            â”‚           â”‚
â”‚   â”‚ â”œâ”€â”€ LoaiNguoiNhan = "CA_NHAN"                   â”‚           â”‚
â”‚   â”‚ â”œâ”€â”€ NguoiNhanID = ID ngÆ°á»i Ä‘Æ°á»£c chá»n           â”‚           â”‚
â”‚   â”‚ â”œâ”€â”€ TrangThai = "MOI"                           â”‚           â”‚
â”‚   â”‚ â””â”€â”€ ThÃ´ng bÃ¡o â†’ Trá»±c tiáº¿p ngÆ°á»i Ä‘Ã³              â”‚           â”‚
â”‚   â”‚                                                  â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2. CÃ¡c Quyáº¿t Äá»‹nh ÄÃ£ Thá»‘ng Nháº¥t

| #     | CÃ¢u há»i                  | Quyáº¿t Ä‘á»‹nh                                                                                                                     |
| ----- | ------------------------ | ------------------------------------------------------------------------------------------------------------------------------ |
| Q2.1  | Validate khoa Ä‘Ã­ch?      | **KHOA**: check `CauHinhThongBaoKhoa` exists + `DanhSachNguoiDieuPhoi.length > 0` (cáº£nh bÃ¡o náº¿u = 0). **CÃ NHÃ‚N**: khÃ´ng check |
| Q2.2  | Khoa khÃ´ng cÃ³ danh má»¥c?  | **Block** - khÃ´ng cho gá»­i, hiá»‡n thÃ´ng bÃ¡o "Khoa chÆ°a cáº¥u hÃ¬nh danh má»¥c yÃªu cáº§u"                                                |
| Q2.3  | Visibility (3 tabs)?     | **Äáº¿n** (KhoaDichID = khoa mÃ¬nh), **Äi** (KhoaNguonID = khoa mÃ¬nh), **Cá»§a tÃ´i** (NguoiYeuCauID = mÃ¬nh)                         |
| Q2.4a | Gá»­i cho chÃ­nh khoa mÃ¬nh? | **CÃ³** - cho phÃ©p, UI bÃ¬nh thÆ°á»ng (khÃ´ng cáº§n warning)                                                                          |
| Q2.4b | Dropdown chá»n NV?        | Chá»‰ hiá»‡n NV **Ä‘ang lÃ m** (check `DaNghi = false`, `isDeleted = false`)                                                         |
| Q2.4c | Ghi chÃº thÃªm?            | **KhÃ´ng cáº§n** - MÃ´ táº£ lÃ  Ä‘á»§                                                                                                    |
| Q2.5  | Redirect sau táº¡o?        | **Vá» danh sÃ¡ch** - khÃ´ng vÃ o chi tiáº¿t                                                                                          |
| Q2.6  | Sá»­a yÃªu cáº§u khi MOI?     | **Sá»­a táº¥t cáº£** fields. Náº¿u Ä‘á»•i `KhoaDichID` hoáº·c `NguoiDuocYeuCauID` â†’ gá»­i thÃ´ng bÃ¡o cho Ä‘Ã­ch cÅ©                               |
| Q2.7  | Ai xÃ³a Ä‘Æ°á»£c?             | **NguoiYeuCauID** + **Admin** (hard delete khi MOI)                                                                            |
| Q2.8  | Field báº¯t buá»™c?          | TieuDe, MoTa                                                                                                                   |

### 2.3. Snapshot Danh Má»¥c

Khi táº¡o yÃªu cáº§u, há»‡ thá»‘ng **"chá»¥p áº£nh"** thÃ´ng tin danh má»¥c vÃ o yÃªu cáº§u:

```javascript
SnapshotDanhMuc: {
  TenLoaiYeuCau: "Sá»­a lá»—i pháº§n má»m",
  ThoiGianDuKien: 60,
  DonViThoiGian: "PHUT"
}
```

**LÃ½ do**: Danh má»¥c cÃ³ thá»ƒ cáº­p nháº­t sau (Ä‘á»•i tÃªn, thá»i gian) mÃ  khÃ´ng áº£nh hÆ°á»Ÿng yÃªu cáº§u cÅ©.

### 2.4. MÃ£ YÃªu Cáº§u (Auto-generate)

Format: `YC{YYYY}{NNNNNN}`

VÃ­ dá»¥: `YC2025000001`, `YC2025000002`, ...

### 2.5. Sá»­a YÃªu Cáº§u (Khi CÃ²n á» Tráº¡ng ThÃ¡i MOI)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Sá»¬A YÃŠU Cáº¦U - CHá»ˆ KHI TRáº NG THÃI MOI               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ğŸ‘¤ Ai Ä‘Æ°á»£c sá»­a?                                                â”‚
â”‚   â”œâ”€â”€ NguoiYeuCauID (ngÆ°á»i táº¡o)                                 â”‚
â”‚   â””â”€â”€ Admin                                                      â”‚
â”‚                                                                  â”‚
â”‚   ğŸ“ ÄÆ°á»£c sá»­a nhá»¯ng gÃ¬?                                          â”‚
â”‚   â”œâ”€â”€ KhoaDichID                                                 â”‚
â”‚   â”œâ”€â”€ LoaiNguoiNhan (KHOA â†” CA_NHAN)                            â”‚
â”‚   â”œâ”€â”€ NguoiDuocYeuCauID (náº¿u CA_NHAN)                           â”‚
â”‚   â”œâ”€â”€ DanhMucYeuCauID + SnapshotDanhMuc                         â”‚
â”‚   â”œâ”€â”€ TieuDe                                                     â”‚
â”‚   â”œâ”€â”€ MoTa                                                       â”‚
â”‚   â””â”€â”€ File Ä‘Ã­nh kÃ¨m (thÃªm/xÃ³a)                                   â”‚
â”‚                                                                  â”‚
â”‚   âš ï¸ Luá»“ng thÃ´ng bÃ¡o khi Ä‘á»•i ÄÃCH:                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ Náº¾U Ä‘á»•i KhoaDichID hoáº·c NguoiDuocYeuCauID:                 â”‚
â”‚   â”‚                                          â”‚                   â”‚
â”‚   â”‚ 1. Gá»­i TB cho ÄÃCH CÅ¨: "YÃªu cáº§u YC... Ä‘Ã£ â”‚                   â”‚
â”‚   â”‚    Ä‘Æ°á»£c chuyá»ƒn sang [Ä‘Ã­ch má»›i]"          â”‚                   â”‚
â”‚   â”‚                                          â”‚                   â”‚
â”‚   â”‚ 2. Gá»­i TB cho ÄÃCH Má»šI: "Báº¡n nháº­n Ä‘Æ°á»£c   â”‚                   â”‚
â”‚   â”‚    yÃªu cáº§u má»›i YC..."                    â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.6. XÃ³a YÃªu Cáº§u (Hard Delete)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              XÃ“A YÃŠU Cáº¦U - HARD DELETE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   â›” Äiá»u kiá»‡n:                                                  â”‚
â”‚   â””â”€â”€ TrangThai = MOI (duy nháº¥t)                                â”‚
â”‚                                                                  â”‚
â”‚   ğŸ‘¤ Ai Ä‘Æ°á»£c xÃ³a?                                                â”‚
â”‚   â”œâ”€â”€ NguoiYeuCauID (ngÆ°á»i táº¡o)                                 â”‚
â”‚   â””â”€â”€ Admin                                                      â”‚
â”‚                                                                  â”‚
â”‚   ğŸ—‘ï¸ XÃ³a kÃ¨m:                                                   â”‚
â”‚   â”œâ”€â”€ Táº¥t cáº£ BinhLuan liÃªn quan                                 â”‚
â”‚   â”œâ”€â”€ Táº¥t cáº£ TepTin liÃªn quan (xÃ³a file trÃªn storage)           â”‚
â”‚   â””â”€â”€ Táº¥t cáº£ LichSuYeuCau liÃªn quan                             â”‚
â”‚                                                                  â”‚
â”‚   ğŸ“¢ ThÃ´ng bÃ¡o:                                                  â”‚
â”‚   â””â”€â”€ Gá»­i TB cho Ä‘Ã­ch (náº¿u Ä‘Ã£ nháº­n Ä‘Æ°á»£c TB trÆ°á»›c Ä‘Ã³)            â”‚
â”‚       "YÃªu cáº§u YC... Ä‘Ã£ bá»‹ há»§y bá»Ÿi ngÆ°á»i gá»­i"                   â”‚
â”‚                                                                  â”‚
â”‚   ğŸ’¡ LÆ°u Ã½: Sau khi Ä‘Ã£ TIEP_NHAN, khÃ´ng thá»ƒ xÃ³a!                â”‚
â”‚            â†’ Náº¿u cáº§n há»§y: trao Ä‘á»•i vá»›i ngÆ°á»i xá»­ lÃ½              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Pháº§n 3: Tiáº¿p Nháº­n & Äiá»u Phá»‘i

### 3.1. Flow Khi YÃªu Cáº§u Gá»­i Äáº¿n KHOA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           YÃŠU Cáº¦U Gá»¬I Äáº¾N KHOA (LoaiNguoiNhan = "KHOA")        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   YÃªu cáº§u Má»šI (TrangThai = "MOI")                               â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚   â”‚ ğŸ”” ThÃ´ng bÃ¡o Ä‘áº¿n:               â”‚                           â”‚
â”‚   â”‚    Danh sÃ¡ch Ä‘iá»u phá»‘i          â”‚                           â”‚
â”‚   â”‚    (CauHinhThongBaoKhoa)        â”‚                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                    â”‚                                             â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚        â–¼           â–¼           â–¼                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚ TIáº¾P   â”‚ â”‚ Tá»ª     â”‚ â”‚ ÄIá»€U PHá»I   â”‚                      â”‚
â”‚   â”‚ NHáº¬N   â”‚ â”‚ CHá»I   â”‚ â”‚ (cho NV khÃ¡c)â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚        â”‚           â”‚             â”‚                               â”‚
â”‚        â”‚           â”‚             â”‚ Chá»n NV trong khoa            â”‚
â”‚        â”‚           â”‚             â–¼                               â”‚
â”‚        â”‚           â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚        â”‚           â”‚      â”‚ ğŸ”” NV Ä‘Æ°á»£c Ä‘iá»u â”‚                   â”‚
â”‚        â”‚           â”‚      â”‚    phá»‘i nháº­n TB â”‚                   â”‚
â”‚        â”‚           â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚        â”‚           â”‚               â”‚                             â”‚
â”‚        â”‚           â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚        â”‚           â”‚      â–¼        â–¼        â–¼                   â”‚
â”‚        â”‚           â”‚  [TIáº¾P   [Tá»ª CHá»I  [Gá»¬I Vá»€                â”‚
â”‚        â”‚           â”‚   NHáº¬N]   THáº²NG]    KHOA]                  â”‚
â”‚        â”‚           â”‚      â”‚        â”‚        â”‚                    â”‚
â”‚        â”‚           â”‚      â”‚        â”‚        â””â”€â”€â–º Quay vá» inbox   â”‚
â”‚        â”‚           â”‚      â”‚        â”‚            (Ä‘á»£i Ä‘iá»u phá»‘i   â”‚
â”‚        â”‚           â”‚      â”‚        â”‚             tiáº¿p)           â”‚
â”‚        â”‚           â”‚      â”‚        â”‚                             â”‚
â”‚        â–¼           â–¼      â–¼        â–¼                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ ÄÃƒ TIáº¾P NHáº¬N           â”‚  â”‚ Tá»ª CHá»I    â”‚                  â”‚
â”‚   â”‚ â”œâ”€â”€ NguoiXuLyID = ...  â”‚  â”‚ + LyDo     â”‚                  â”‚
â”‚   â”‚ â”œâ”€â”€ NgayTiepNhan       â”‚  â”‚ + GhiChu   â”‚                  â”‚
â”‚   â”‚ â””â”€â”€ ThoiGianHen (auto) â”‚  â”‚            â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2. Flow Khi YÃªu Cáº§u Gá»­i Äáº¿n CÃ NHÃ‚N

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        YÃŠU Cáº¦U Gá»¬I Äáº¾N CÃ NHÃ‚N (LoaiNguoiNhan = "CA_NHAN")     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   YÃªu cáº§u Má»šI (NguoiNhanID = NV_A)                              â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚   â”‚ ğŸ”” ThÃ´ng bÃ¡o TRá»°C TIáº¾P Ä‘áº¿n:    â”‚                           â”‚
â”‚   â”‚    NguoiNhanID (NV_A)          â”‚                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                    â”‚                                             â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚        â–¼           â–¼           â–¼                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚   â”‚ TIáº¾P   â”‚ â”‚ Tá»ª     â”‚ â”‚ Gá»¬I Vá»€  â”‚                          â”‚
â”‚   â”‚ NHáº¬N   â”‚ â”‚ CHá»I   â”‚ â”‚ KHOA    â”‚                          â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚        â”‚           â”‚           â”‚                                 â”‚
â”‚        â”‚           â”‚           â”‚ Chuyá»ƒn thÃ nh "gá»­i Ä‘áº¿n khoa"    â”‚
â”‚        â”‚           â”‚           â”‚ LoaiNguoiNhan = "KHOA"         â”‚
â”‚        â”‚           â”‚           â”‚ NguoiNhanID = null             â”‚
â”‚        â”‚           â”‚           â”‚                                 â”‚
â”‚        â”‚           â”‚           â””â”€â”€â–º ğŸ”” ThÃ´ng bÃ¡o Ä‘áº¿n            â”‚
â”‚        â”‚           â”‚                  ngÆ°á»i Ä‘iá»u phá»‘i           â”‚
â”‚        â”‚           â”‚                                             â”‚
â”‚        â–¼           â–¼                                             â”‚
â”‚   ÄÃƒ TIáº¾P NHáº¬N   Tá»ª CHá»I (káº¿t thÃºc)                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3. Báº£ng Tá»•ng Há»£p Actions Theo Vai TrÃ²

| Vai trÃ²                        | YÃªu cáº§u Ä‘áº¿n KHOA                        | YÃªu cáº§u Ä‘áº¿n CÃ NHÃ‚N                     |
| ------------------------------ | --------------------------------------- | --------------------------------------- |
| **NgÆ°á»i Ä‘iá»u phá»‘i**            | Tiáº¿p nháº­n / Tá»« chá»‘i / Äiá»u phá»‘i         | (KhÃ´ng liÃªn quan trá»±c tiáº¿p)             |
| **NV Ä‘Æ°á»£c Ä‘iá»u phá»‘i**          | Tiáº¿p nháº­n / Tá»« chá»‘i tháº³ng / Gá»­i vá» khoa | -                                       |
| **NV Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh (cÃ¡ nhÃ¢n)** | -                                       | Tiáº¿p nháº­n / Tá»« chá»‘i tháº³ng / Gá»­i vá» khoa |

### 3.4. CÃ¡c Quyáº¿t Äá»‹nh ÄÃ£ Thá»‘ng Nháº¥t

| #    | CÃ¢u há»i                        | Quyáº¿t Ä‘á»‹nh                                                                               |
| ---- | ------------------------------ | ---------------------------------------------------------------------------------------- |
| Q3.1 | NgÆ°á»i tiáº¿p nháº­n = NgÆ°á»i xá»­ lÃ½? | **CÃ³** - tiáº¿p nháº­n = xá»­ lÃ½ luÃ´n, khÃ´ng thá»ƒ chuyá»ƒn cho ngÆ°á»i khÃ¡c                         |
| Q3.2 | "Gá»­i vá» khoa" xá»­ lÃ½ tháº¿ nÃ o?   | Giá»¯ MOI, `NguoiDuocDieuPhoiID = null`, TB gá»­i **táº¥t cáº£ ngÆ°á»i Ä‘iá»u phá»‘i**                 |
| Q3.3 | LyDoKhac báº¯t buá»™c ghi chÃº?     | **CÃ³** - náº¿u chá»n "LÃ½ do khÃ¡c" pháº£i nháº­p ghi chÃº                                         |
| Q3.4 | Lá»‹ch sá»­ Ä‘iá»u phá»‘i?             | LÆ°u **Ä‘áº§y Ä‘á»§** má»i action vÃ o `LichSuYeuCau` (xem 3.8)                                   |
| Q3.5 | TB khi Ä‘iá»u phá»‘i?              | **Cáº£ 2**: NV Ä‘Æ°á»£c Ä‘iá»u phá»‘i + NgÆ°á»i yÃªu cáº§u ("YÃªu cáº§u cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c phÃ¢n cÃ´ng cho...") |
| Q3.6 | Timeout MOI?                   | NgÆ°á»i gá»­i tá»± escalate: **"Nháº¯c láº¡i"** (3 láº§n/ngÃ y) + **"BÃ¡o quáº£n lÃ½"** (1 láº§n/ngÃ y)      |
| Q3.7 | Giá»›i háº¡n Ä‘iá»u phá»‘i?            | **KhÃ´ng giá»›i háº¡n** sá»‘ láº§n Ä‘iá»u phá»‘i                                                      |
| Q3.8 | Thá»i gian háº¹n khi tiáº¿p nháº­n?   | Máº·c Ä‘á»‹nh = Thá»i Ä‘iá»ƒm tiáº¿p nháº­n + Thá»i gian dá»± kiáº¿n (tá»« danh má»¥c), cho phÃ©p chá»‰nh sá»­a     |

### 3.5. TÃ­nh Thá»i Gian Háº¹n Khi Tiáº¿p Nháº­n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TÃNH THá»œI GIAN Háº¸N KHI TIáº¾P NHáº¬N                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   CÃ´ng thá»©c:                                                     â”‚
â”‚   ThoiGianHen = ThoiDiemTiepNhan + ThoiGianDuKien               â”‚
â”‚                                                                  â”‚
â”‚   VÃ­ dá»¥:                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ Loáº¡i yÃªu cáº§u: "Sá»­a lá»—i pháº§n má»m"        â”‚                   â”‚
â”‚   â”‚ Thá»i gian dá»± kiáº¿n: 60 phÃºt              â”‚                   â”‚
â”‚   â”‚                                          â”‚                   â”‚
â”‚   â”‚ Tiáº¿p nháº­n lÃºc: 28/11/2025 09:00         â”‚                   â”‚
â”‚   â”‚                                          â”‚                   â”‚
â”‚   â”‚ â†’ Thá»i gian háº¹n: 28/11/2025 10:00       â”‚                   â”‚
â”‚   â”‚   (máº·c Ä‘á»‹nh, cÃ³ thá»ƒ chá»‰nh)              â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â”‚   UI khi tiáº¿p nháº­n:                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ â±ï¸ Thá»i gian háº¹n hoÃ n thÃ nh:            â”‚                   â”‚
â”‚   â”‚                                          â”‚                   â”‚
â”‚   â”‚ [28/11/2025 10:00    â–¼]  â† DateTimePickerâ”‚                  â”‚
â”‚   â”‚                          (prefilled)     â”‚                   â”‚
â”‚   â”‚                                          â”‚                   â”‚
â”‚   â”‚ ğŸ’¡ Dá»± kiáº¿n: 60 phÃºt                     â”‚                   â”‚
â”‚   â”‚                                          â”‚                   â”‚
â”‚   â”‚        [Há»§y]  [Tiáº¿p nháº­n]               â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.6. Visibility - Ai Tháº¥y GÃ¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              VISIBILITY - TOÃ€N Bá»˜ KHOA Äá»€U THáº¤Y                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ğŸ“‹ Danh sÃ¡ch yÃªu cáº§u cá»§a Khoa CNTT:                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ MÃ£      â”‚ Loáº¡i           â”‚ Gá»­i Ä‘áº¿n   â”‚ Tráº¡ng thÃ¡i       â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚ YC001   â”‚ Sá»­a pháº§n má»m   â”‚ Khoa      â”‚ Má»›i              â”‚   â”‚
â”‚   â”‚ YC002   â”‚ Má»Ÿ bá»‡nh Ã¡n     â”‚ Anh Tuáº¥n  â”‚ Äang xá»­ lÃ½       â”‚   â”‚
â”‚   â”‚ YC003   â”‚ Láº¯p mÃ¡y        â”‚ Khoa      â”‚ ÄÃ£ tiáº¿p nháº­n     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚   ğŸ‘ï¸ Ai tháº¥y danh sÃ¡ch nÃ y?                                    â”‚
â”‚   â”œâ”€â”€ NgÆ°á»i Ä‘iá»u phá»‘i: âœ… Tháº¥y táº¥t cáº£                           â”‚
â”‚   â”œâ”€â”€ NhÃ¢n viÃªn khoa:  âœ… Tháº¥y táº¥t cáº£                           â”‚
â”‚   â””â”€â”€ NhÃ¢n viÃªn khoa khÃ¡c: âŒ KhÃ´ng tháº¥y                        â”‚
â”‚                                                                  â”‚
â”‚   ğŸ”” Ai nháº­n THÃ”NG BÃO?                                         â”‚
â”‚   â”œâ”€â”€ Gá»­i Ä‘áº¿n KHOA:    â†’ NgÆ°á»i trong CauHinhThongBaoKhoa       â”‚
â”‚   â””â”€â”€ Gá»­i Ä‘áº¿n CÃ NHÃ‚N: â†’ Chá»‰ ngÆ°á»i Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.7. Escalate - NgÆ°á»i Gá»­i Tá»± Nháº¯c

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ESCALATE - NGÆ¯á»œI Gá»¬I Tá»° THá»°C HIá»†N                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ğŸ“‹ Chi tiáº¿t yÃªu cáº§u YC2025000123                              â”‚
â”‚   â”œâ”€â”€ Tráº¡ng thÃ¡i: ğŸ”µ Má»šI                                        â”‚
â”‚   â”œâ”€â”€ Gá»­i lÃºc: 28/11/2025 09:00                                 â”‚
â”‚   â””â”€â”€ ÄÃ£ 6 tiáº¿ng chÆ°a ai tiáº¿p nháº­n                              â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚  [ğŸ”” Nháº¯c láº¡i]    [âš ï¸ BÃ¡o quáº£n lÃ½]     â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â”‚   ğŸ”” Nháº¯c láº¡i (NHAC_LAI):                                       â”‚
â”‚   â”œâ”€â”€ Gá»­i láº¡i thÃ´ng bÃ¡o cho ngÆ°á»i Ä‘iá»u phá»‘i                     â”‚
â”‚   â”œâ”€â”€ Giá»›i háº¡n: 3 láº§n/ngÃ y                                      â”‚
â”‚   â””â”€â”€ Ghi lá»‹ch sá»­: NHAC_LAI                                     â”‚
â”‚                                                                  â”‚
â”‚   âš ï¸ BÃ¡o quáº£n lÃ½ (BAO_QUAN_LY):                                 â”‚
â”‚   â”œâ”€â”€ Gá»­i thÃ´ng bÃ¡o cho DanhSachQuanLyKhoa                      â”‚
â”‚   â”œâ”€â”€ Giá»›i háº¡n: 1 láº§n/ngÃ y                                      â”‚
â”‚   â””â”€â”€ Ghi lá»‹ch sá»­: BAO_QUAN_LY                                  â”‚
â”‚                                                                  â”‚
â”‚   ğŸ’¡ LÆ°u Ã½:                                                      â”‚
â”‚   â”œâ”€â”€ Chá»‰ hiá»ƒn thá»‹ khi TrangThai = MOI                          â”‚
â”‚   â”œâ”€â”€ Äáº¿m sá»‘ láº§n theo ngÃ y (reset 00:00)                        â”‚
â”‚   â””â”€â”€ UI disable nÃºt náº¿u Ä‘Ã£ háº¿t lÆ°á»£t                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.8. Cáº¥u TrÃºc LichSuYeuCau

LÆ°u **Ä‘áº§y Ä‘á»§** má»i action Ä‘á»ƒ audit/review sau nÃ y:

```javascript
const LichSuYeuCauSchema = {
  YeuCauID: ObjectId, // ref: 'YeuCau'
  NguoiThucHien: ObjectId, // ref: 'NhanVien'
  ThoiGian: Date, // default: now()

  HanhDong: String, // enum - xem báº£ng bÃªn dÆ°á»›i
  TrangThaiTruoc: String,
  TrangThaiSau: String,

  ChiTiet: {
    // Äiá»u phá»‘i
    NguoiDuocDieuPhoiID: ObjectId,
    TenNguoiDuocDieuPhoi: String, // Snapshot Ä‘á»ƒ khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng khi data gá»‘c Ä‘á»•i

    // Tá»« chá»‘i
    LyDoTuChoiID: ObjectId,
    TenLyDoTuChoi: String, // Snapshot
    GhiChuTuChoi: String,

    // ÄÃ¡nh giÃ¡
    SoSao: Number,
    NhanXet: String,

    // Sá»­a yÃªu cáº§u
    ThayDoi: [
      {
        TruongThayDoi: String, // VD: "KhoaDichID"
        GiaTriCu: Mixed,
        GiaTriMoi: Mixed,
      },
    ],

    // Thá»i gian háº¹n
    ThoiGianHenCu: Date,
    ThoiGianHenMoi: Date,

    // Appeal
    LyDoAppeal: String,

    // Ghi chÃº chung
    GhiChu: String,
  },
};
```

**Danh sÃ¡ch HanhDong:**

| HanhDong            | MÃ´ táº£                         |
| ------------------- | ----------------------------- |
| `TAO_MOI`           | Táº¡o yÃªu cáº§u má»›i               |
| `DIEU_PHOI`         | Äiá»u phá»‘i cho NV              |
| `GUI_VE_KHOA`       | NV gá»­i vá» khoa                |
| `TIEP_NHAN`         | Tiáº¿p nháº­n xá»­ lÃ½               |
| `TU_CHOI`           | Tá»« chá»‘i                       |
| `HOAN_THANH`        | BÃ¡o hoÃ n thÃ nh                |
| `DANH_GIA`          | ÄÃ¡nh giÃ¡                      |
| `DONG`              | ÄÃ³ng (manual hoáº·c auto)       |
| `MO_LAI`            | Má»Ÿ láº¡i tá»« DA_DONG             |
| `APPEAL`            | Khiáº¿u náº¡i tá»« chá»‘i             |
| `HUY_TIEP_NHAN`     | Há»§y tiáº¿p nháº­n (vá» MOI)        |
| `SUA_YEU_CAU`       | Sá»­a yÃªu cáº§u                   |
| `DOI_THOI_GIAN_HEN` | Äá»•i deadline                  |
| `XOA`               | Ghi láº¡i trÆ°á»›c khi hard delete |
| `NHAC_LAI`          | NgÆ°á»i gá»­i nháº¯c láº¡i            |
| `BAO_QUAN_LY`       | NgÆ°á»i gá»­i bÃ¡o quáº£n lÃ½         |

---

## Pháº§n 4: Xá»­ LÃ½ & HoÃ n ThÃ nh

### 4.1. CÃ¡c Quyáº¿t Äá»‹nh ÄÃ£ Thá»‘ng Nháº¥t

| #     | CÃ¢u há»i                                         | Quyáº¿t Ä‘á»‹nh                                                                                       |
| ----- | ----------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| Q4.1  | Gá»™p DA_TIEP_NHAN/DANG_XU_LY?                    | **CÃ³** - chá»‰ cÃ²n 5 states: MOI, DANG_XU_LY, DA_HOAN_THANH, DA_DONG, TU_CHOI                      |
| Q4.2  | Há»§y tiáº¿p nháº­n                                   | Chá»‰ **NguoiXuLy**, khÃ´ng cáº§n lÃ½ do, `NguoiXuLyID = null`, TB cho **ngÆ°á»i gá»­i + ngÆ°á»i Ä‘iá»u phá»‘i** |
| Q4.3  | Comment/File trong xá»­ lÃ½?                       | **CÃ³** - cáº£ ngÆ°á»i gá»­i vÃ  ngÆ°á»i xá»­ lÃ½ (pattern reuse BinhLuan/TepTin - bÃ n riÃªng)                 |
| Q4.4  | Äá»•i thá»i gian háº¹n?                              | **CÃ³** - chá»‰ ngÆ°á»i xá»­ lÃ½                                                                         |
| Q4.5  | Tá»± Ä‘á»™ng Ä‘Ã³ng?                                   | **3 ngÃ y** sau khi hoÃ n thÃ nh (Agenda.js), Ä‘Ã¡nh giÃ¡ máº·c Ä‘á»‹nh 5â­                                 |
| Q4.6  | XÃ³a yÃªu cáº§u?                                    | **Chá»‰ khi MOI** - NguoiGui + Admin (hard delete)                                                 |
| Q4.7  | TB khi hoÃ n thÃ nh                               | Chá»‰ **ngÆ°á»i gá»­i**                                                                                |
| Q4.8  | YEU_CAU_XU_LY_TIEP (DA_HOAN_THANH â†’ DANG_XU_LY) | Chá»‰ **NguoiXuLy**, khÃ´ng cáº§n lÃ½ do, TB **ngÆ°á»i gá»­i**                                             |
| Q4.9  | Má»Ÿ láº¡i tá»« DA_DONG?                              | Vá» **DA_HOAN_THANH**, trong 7 ngÃ y, **cáº£ 2** Ä‘á»u má»Ÿ Ä‘Æ°á»£c, báº¯t buá»™c lÃ½ do, TB Ä‘á»‘i phÆ°Æ¡ng          |
| Q4.10 | ÄÃ¡nh giÃ¡ khi má»Ÿ láº¡i?                            | **Giá»¯ Ä‘Ã¡nh giÃ¡ cÅ©**, ngÆ°á»i gá»­i cÃ³ thá»ƒ **Ä‘Ã¡nh giÃ¡ láº¡i** (ghi Ä‘Ã¨)                                  |
| Q4.11 | Appeal tá»« TU_CHOI?                              | **CÃ³** - báº¯t buá»™c nháº­p lÃ½ do, khÃ´ng giá»›i háº¡n sá»‘ láº§n, vá» MOI                                      |
| Q4.12 | Comments/files khi há»§y tiáº¿p nháº­n?               | **Giá»¯ nguyÃªn** - lÃ  trao Ä‘á»•i cÃ³ giÃ¡ trá»‹                                                          |

### 4.2. BÃ¬nh Luáº­n & Tá»‡p Tin (BinhLuan/TepTin)

#### 4.2.1. Permission - Ai ÄÆ°á»£c BÃ¬nh Luáº­n?

**PhÆ°Æ¡ng Ã¡n B (Open)**: Ai thuá»™c workflow YeuCau Ä‘á»u cÃ³ thá»ƒ bÃ¬nh luáº­n

| Vai trÃ²                | Äiá»u kiá»‡n kiá»ƒm tra                                        | ÄÆ°á»£c comment? |
| ---------------------- | --------------------------------------------------------- | ------------- |
| **NguoiGuiID**         | `NhanVienID === YeuCau.NguoiGuiID`                        | âœ…            |
| **NguoiXuLyID**        | `NhanVienID === YeuCau.NguoiXuLyID`                       | âœ…            |
| **Äiá»u phá»‘i KhoaNhan** | `NhanVienID in CauHinhThongBaoKhoa.DanhSachNguoiDieuPhoi` | âœ…            |
| **Admin/SuperAdmin**   | `User.PhanQuyen in ["admin", "superadmin"]`               | âœ…            |

#### 4.2.2. Tráº¡ng ThÃ¡i Cho PhÃ©p Comment

| Tráº¡ng thÃ¡i        | Cho comment? | LÃ½ do                                 |
| ----------------- | ------------ | ------------------------------------- |
| **MOI**           | âœ…           | Äiá»u phá»‘i cÃ³ thá»ƒ há»i thÃªm thÃ´ng tin   |
| **DANG_XU_LY**    | âœ…           | Trao Ä‘á»•i chÃ­nh khi xá»­ lÃ½              |
| **DA_HOAN_THANH** | âœ…           | NguoiGui pháº£n há»“i, yÃªu cáº§u xá»­ lÃ½ tiáº¿p |
| **DA_DONG**       | âœ…           | Trao Ä‘á»•i thÃªm náº¿u cáº§n má»Ÿ láº¡i          |
| **TU_CHOI**       | âœ…           | Giáº£i thÃ­ch trÆ°á»›c khi appeal           |

> **Káº¿t luáº­n**: Cho comment á»Ÿ **Má»ŒI tráº¡ng thÃ¡i**

#### 4.2.3. XÃ³a/Thu Há»“i Comment

| Quyá»n           | Äiá»u kiá»‡n                                   |
| --------------- | ------------------------------------------- |
| **Chá»§ comment** | `NguoiBinhLuanID === User.NhanVienID`       |
| **Admin**       | `User.PhanQuyen in ["admin", "superadmin"]` |

- **Soft delete**: KhÃ´ng xÃ³a háº³n, Ä‘á»•i `TrangThai = "DELETED"`
- **Thu há»“i text**: Chá»‰ xÃ³a `NoiDung`, giá»¯ files Ä‘Ã­nh kÃ¨m

#### 4.2.4. ThÃ´ng BÃ¡o Comment

| Ai              | Nháº­n TB khi cÃ³ comment?      |
| --------------- | ---------------------------- |
| **NguoiGuiID**  | âœ… Nháº­n (trá»« khi tá»± comment) |
| **NguoiXuLyID** | âœ… Nháº­n (trá»« khi tá»± comment) |
| **Äiá»u phá»‘i**   | âŒ **KHÃ”NG** (trÃ¡nh spam)    |

> **LÆ°u Ã½**: `excludePerformer = true` - ngÆ°á»i comment khÃ´ng nháº­n TB cá»§a chÃ­nh mÃ¬nh

#### 4.2.5. Threading (Reply)

- Sá»­ dá»¥ng `BinhLuanChaID` Ä‘á»ƒ táº¡o reply
- Validate: Parent pháº£i thuá»™c cÃ¹ng `YeuCauID`
- Parent khÃ´ng Ä‘Æ°á»£c á»Ÿ tráº¡ng thÃ¡i `DELETED`

### 4.3. State Machine (5 States)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STATE MACHINE - YÃŠU Cáº¦U                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚           Táº¡o má»›i â”€â”€â”€â–º â”‚   MOI   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚                         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚       â”‚
â”‚                              â”‚                          â”‚       â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚       â”‚
â”‚         â”‚                    â”‚                â”‚         â”‚       â”‚
â”‚         â–¼                    â–¼                â–¼         â”‚       â”‚
â”‚    [Tiáº¿p nháº­n]          [Tá»« chá»‘i]          [XÃ“A]       â”‚       â”‚
â”‚         â”‚                    â”‚             (hard)       â”‚       â”‚
â”‚         â–¼                    â–¼                          â”‚       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚       â”‚
â”‚  â”‚ DANG_XU_LY  â”‚      â”‚ TU_CHOI  â”‚â”€â”€[Appeal]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  (báº¯t buá»™c lÃ½ do)           â”‚
â”‚         â”‚     â–²                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”                                             â”‚
â”‚  â–¼                â–¼                                              â”‚
â”‚ [HoÃ n      [Há»§y tiáº¿p                                            â”‚
â”‚  thÃ nh]     nháº­n]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º MOI    â”‚
â”‚  â”‚          (ko lÃ½ do, TB ngÆ°á»i gá»­i + Ä‘iá»u phá»‘i)                â”‚
â”‚  â–¼                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚
â”‚ â”‚DA_HOAN_THANHâ”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                    â”‚            â”‚
â”‚        â”‚      â–²                                    â”‚            â”‚
â”‚        â”‚      â”‚ [YEU_CAU_XU_LY_TIEP]               â”‚            â”‚
â”‚        â”‚      â”‚ (NguoiXuLy, ko lÃ½ do, TB ngÆ°á»i gá»­i)â”‚            â”‚
â”‚        â”‚      â”‚                                    â”‚            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚            â”‚
â”‚ â–¼      â–¼          â–¼            â–¼                   â”‚            â”‚
â”‚[ÄÃ¡nh [ÄÃ³ng]   [3 ngÃ y]    â”€â”€â–º DANG_XU_LY          â”‚            â”‚
â”‚ giÃ¡]   â”‚     (auto,5â­)                            â”‚            â”‚
â”‚  â”‚     â”‚                                           â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚            â”‚
â”‚                    â–¼                               â”‚            â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚            â”‚
â”‚                â”‚ DA_DONG â”‚â”€â”€[Má»Ÿ láº¡i trong 7 ngÃ y]â”€â”€â”˜            â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  (báº¯t buá»™c lÃ½ do, TB Ä‘á»‘i phÆ°Æ¡ng)     â”‚
â”‚                             (giá»¯ Ä‘Ã¡nh giÃ¡, cho Ä‘Ã¡nh giÃ¡ láº¡i)    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4. CÃ¡c Tráº¡ng ThÃ¡i

| Tráº¡ng thÃ¡i      | MÃ´ táº£                                         |  MÃ u UI   |
| --------------- | --------------------------------------------- | :-------: |
| `MOI`           | YÃªu cáº§u vá»«a táº¡o, chá» tiáº¿p nháº­n                |  ğŸ”µ Blue  |
| `DANG_XU_LY`    | ÄÃ£ tiáº¿p nháº­n vÃ  Ä‘ang xá»­ lÃ½                    | ğŸŸ  Orange |
| `DA_HOAN_THANH` | NgÆ°á»i xá»­ lÃ½ bÃ¡o hoÃ n thÃ nh, chá» Ä‘Ã¡nh giÃ¡/Ä‘Ã³ng | ğŸŸ¢ Green  |
| `DA_DONG`       | ÄÃ£ Ä‘Ã³ng (flow káº¿t thÃºc)                       |  âš« Gray  |
| `TU_CHOI`       | Bá»‹ tá»« chá»‘i                                    |  ğŸ”´ Red   |

### 4.5. Báº£ng Actions Theo Tráº¡ng ThÃ¡i & Vai TrÃ²

| Tráº¡ng thÃ¡i        | NgÆ°á»i gá»­i              | NgÆ°á»i xá»­ lÃ½                                       | NgÆ°á»i Ä‘iá»u phá»‘i               |
| ----------------- | ---------------------- | ------------------------------------------------- | ----------------------------- |
| **MOI**           | XÃ³a, Comment, File     | -                                                 | Tiáº¿p nháº­n, Tá»« chá»‘i, Äiá»u phá»‘i |
| **DANG_XU_LY**    | Comment, File          | Comment, File, Äá»•i háº¹n, HoÃ n thÃ nh, Há»§y tiáº¿p nháº­n | -                             |
| **DA_HOAN_THANH** | ÄÃ¡nh giÃ¡, ÄÃ³ng, Má»Ÿ láº¡i | ÄÃ³ng                                              | -                             |
| **DA_DONG**       | Má»Ÿ láº¡i (trong 7 ngÃ y)  | Má»Ÿ láº¡i (trong 7 ngÃ y)                             | -                             |
| **TU_CHOI**       | Appeal (nháº­p lÃ½ do)    | -                                                 | -                             |

### 4.6. Chi Tiáº¿t CÃ¡c Transitions

#### 4.6.1. Tiáº¿p Nháº­n (MOI â†’ DANG_XU_LY)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TRANSITION: TIáº¾P NHáº¬N                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ai cÃ³ quyá»n:                                                   â”‚
â”‚   â”œâ”€â”€ NgÆ°á»i Ä‘iá»u phá»‘i (tiáº¿p nháº­n trá»±c tiáº¿p, 1 click)           â”‚
â”‚   â”œâ”€â”€ NV Ä‘Æ°á»£c Ä‘iá»u phá»‘i                                         â”‚
â”‚   â””â”€â”€ NV Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh (gá»­i cÃ¡ nhÃ¢n)                           â”‚
â”‚                                                                  â”‚
â”‚   Äiá»u kiá»‡n:                                                     â”‚
â”‚   â””â”€â”€ Pháº£i nháº­p ThoiGianHen (máº·c Ä‘á»‹nh = now + ThoiGianDuKien)  â”‚
â”‚                                                                  â”‚
â”‚   Thay Ä‘á»•i:                                                      â”‚
â”‚   â”œâ”€â”€ TrangThai = "DANG_XU_LY"                                  â”‚
â”‚   â”œâ”€â”€ NguoiXuLyID = ngÆ°á»i tiáº¿p nháº­n                            â”‚
â”‚   â”œâ”€â”€ NgayTiepNhan = now()                                      â”‚
â”‚   â””â”€â”€ ThoiGianHen = giÃ¡ trá»‹ nháº­p                               â”‚
â”‚                                                                  â”‚
â”‚   Lá»‹ch sá»­: TIEP_NHAN                                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.6.2. Há»§y Tiáº¿p Nháº­n (DANG_XU_LY â†’ MOI)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 TRANSITION: Há»¦Y TIáº¾P NHáº¬N                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ai cÃ³ quyá»n: Chá»‰ ngÆ°á»i xá»­ lÃ½                                  â”‚
â”‚                                                                  â”‚
â”‚   Äiá»u kiá»‡n: KhÃ´ng                                              â”‚
â”‚                                                                  â”‚
â”‚   Thay Ä‘á»•i:                                                      â”‚
â”‚   â”œâ”€â”€ TrangThai = "MOI"                                         â”‚
â”‚   â”œâ”€â”€ NguoiXuLyID = null                                        â”‚
â”‚   â”œâ”€â”€ NgayTiepNhan = null                                       â”‚
â”‚   â””â”€â”€ ThoiGianHen = null                                        â”‚
â”‚                                                                  â”‚
â”‚   KHÃ”NG XÃ“A: Comments, Files (giá»¯ láº¡i vÃ¬ cÃ³ giÃ¡ trá»‹)           â”‚
â”‚                                                                  â”‚
â”‚   Lá»‹ch sá»­: HUY_TIEP_NHAN                                        â”‚
â”‚   ThÃ´ng bÃ¡o: â†’ NgÆ°á»i gá»­i + NgÆ°á»i Ä‘iá»u phá»‘i                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.6.3. HoÃ n ThÃ nh (DANG_XU_LY â†’ DA_HOAN_THANH)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TRANSITION: HOÃ€N THÃ€NH                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ai cÃ³ quyá»n: Chá»‰ ngÆ°á»i xá»­ lÃ½                                  â”‚
â”‚                                                                  â”‚
â”‚   Thay Ä‘á»•i:                                                      â”‚
â”‚   â”œâ”€â”€ TrangThai = "DA_HOAN_THANH"                               â”‚
â”‚   â””â”€â”€ NgayHoanThanh = now()                                     â”‚
â”‚                                                                  â”‚
â”‚   Lá»‹ch sá»­: HOAN_THANH                                           â”‚
â”‚   ThÃ´ng bÃ¡o: â†’ NgÆ°á»i gá»­i (Ä‘á»ƒ Ä‘Ã¡nh giÃ¡)                         â”‚
â”‚                                                                  â”‚
â”‚   â° Báº¯t Ä‘áº§u Ä‘áº¿m 3 ngÃ y tá»± Ä‘á»™ng Ä‘Ã³ng                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.6.4. YÃªu Cáº§u Xá»­ LÃ½ Tiáº¿p (DA_HOAN_THANH â†’ DANG_XU_LY)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           TRANSITION: YÃŠU Cáº¦U Xá»¬ LÃ TIáº¾P                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ai cÃ³ quyá»n: Chá»‰ ngÆ°á»i xá»­ lÃ½                                  â”‚
â”‚                                                                  â”‚
â”‚   Äiá»u kiá»‡n: KhÃ´ng cáº§n lÃ½ do                                    â”‚
â”‚                                                                  â”‚
â”‚   Thay Ä‘á»•i:                                                      â”‚
â”‚   â”œâ”€â”€ TrangThai = "DANG_XU_LY"                                  â”‚
â”‚   â””â”€â”€ NgayHoanThanh = null                                      â”‚
â”‚                                                                  â”‚
â”‚   Lá»‹ch sá»­: YEU_CAU_XU_LY_TIEP                                   â”‚
â”‚   ThÃ´ng bÃ¡o: â†’ NgÆ°á»i gá»­i                                        â”‚
â”‚                                                                  â”‚
â”‚   ğŸ’¡ Use case: NgÆ°á»i xá»­ lÃ½ phÃ¡t hiá»‡n chÆ°a xong, cáº§n lÃ m thÃªm   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.6.5. ÄÃ³ng (DA_HOAN_THANH â†’ DA_DONG)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TRANSITION: ÄÃ“NG                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ai cÃ³ quyá»n:                                                   â”‚
â”‚   â”œâ”€â”€ NgÆ°á»i gá»­i (cÃ³ thá»ƒ Ä‘Ã¡nh giÃ¡ trÆ°á»›c)                        â”‚
â”‚   â”œâ”€â”€ NgÆ°á»i xá»­ lÃ½                                               â”‚
â”‚   â””â”€â”€ Há»‡ thá»‘ng (sau 3 ngÃ y)                                    â”‚
â”‚                                                                  â”‚
â”‚   Thay Ä‘á»•i:                                                      â”‚
â”‚   â”œâ”€â”€ TrangThai = "DA_DONG"                                     â”‚
â”‚   â”œâ”€â”€ NgayDong = now()                                          â”‚
â”‚   â””â”€â”€ Náº¿u chÆ°a Ä‘Ã¡nh giÃ¡: DanhGia.SoSao = 5 (máº·c Ä‘á»‹nh)          â”‚
â”‚                                                                  â”‚
â”‚   Lá»‹ch sá»­: DONG hoáº·c TU_DONG_DONG (náº¿u há»‡ thá»‘ng)               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.6.6. Má»Ÿ Láº¡i (DA_DONG â†’ DA_HOAN_THANH)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               TRANSITION: Má» Láº I (tá»« Ä‘Ã£ Ä‘Ã³ng)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ai cÃ³ quyá»n: NgÆ°á»i gá»­i HOáº¶C NgÆ°á»i xá»­ lÃ½                       â”‚
â”‚                                                                  â”‚
â”‚   Äiá»u kiá»‡n:                                                     â”‚
â”‚   â”œâ”€â”€ Trong vÃ²ng 7 ngÃ y tá»« NgayDong                            â”‚
â”‚   â””â”€â”€ Báº¯t buá»™c nháº­p lÃ½ do                                       â”‚
â”‚                                                                  â”‚
â”‚   Thay Ä‘á»•i:                                                      â”‚
â”‚   â”œâ”€â”€ TrangThai = "DA_HOAN_THANH"                               â”‚
â”‚   â””â”€â”€ NgayDong = null                                           â”‚
â”‚                                                                  â”‚
â”‚   KHÃ”NG XÃ“A: DanhGia (giá»¯ Ä‘Ã¡nh giÃ¡ cÅ©, cho Ä‘Ã¡nh giÃ¡ láº¡i)       â”‚
â”‚                                                                  â”‚
â”‚   Lá»‹ch sá»­: MO_LAI + LyDo                                        â”‚
â”‚   ThÃ´ng bÃ¡o: â†’ Äá»‘i phÆ°Æ¡ng (ai má»Ÿ thÃ¬ TB ngÆ°á»i cÃ²n láº¡i)         â”‚
â”‚   Sá»‘ láº§n: KhÃ´ng giá»›i háº¡n                                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.6.7. Appeal (TU_CHOI â†’ MOI)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TRANSITION: APPEAL                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Ai cÃ³ quyá»n: Chá»‰ ngÆ°á»i gá»­i                                    â”‚
â”‚                                                                  â”‚
â”‚   Äiá»u kiá»‡n: Báº¯t buá»™c nháº­p lÃ½ do appeal                        â”‚
â”‚                                                                  â”‚
â”‚   Thay Ä‘á»•i:                                                      â”‚
â”‚   â”œâ”€â”€ TrangThai = "MOI"                                         â”‚
â”‚   â”œâ”€â”€ LyDoTuChoiID = null (reset)                              â”‚
â”‚   â””â”€â”€ GhiChuTuChoi = null (reset)                              â”‚
â”‚                                                                  â”‚
â”‚   Lá»‹ch sá»­: APPEAL vá»›i GhiChu = lÃ½ do appeal                    â”‚
â”‚   ThÃ´ng bÃ¡o: â†’ NgÆ°á»i Ä‘iá»u phá»‘i (xem xÃ©t láº¡i)                   â”‚
â”‚   Sá»‘ láº§n: KhÃ´ng giá»›i háº¡n                                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.7. NguyÃªn Táº¯c Backward Transition

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              NGUYÃŠN Táº®C KHI LÃ™I Vá»€ TRáº NG THÃI TRÆ¯á»šC             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   1ï¸âƒ£ CLEANUP: Reset cÃ¡c field cá»§a tráº¡ng thÃ¡i hiá»‡n táº¡i          â”‚
â”‚      â”œâ”€â”€ DANG_XU_LY â†’ MOI: reset NguoiXuLyID, NgayTiepNhan...  â”‚
â”‚      â”œâ”€â”€ DA_HOAN_THANH â†’ DANG_XU_LY: reset NgayHoanThanh       â”‚
â”‚      â””â”€â”€ DA_DONG â†’ DA_HOAN_THANH: reset NgayDong               â”‚
â”‚                                                                  â”‚
â”‚   2ï¸âƒ£ GIá»® NGUYÃŠN: Comments, Files, ÄÃ¡nh giÃ¡                     â”‚
â”‚      â””â”€â”€ LÃ  dá»¯ liá»‡u cÃ³ giÃ¡ trá»‹, khÃ´ng xÃ³a                      â”‚
â”‚                                                                  â”‚
â”‚   3ï¸âƒ£ GHI Lá»ŠCH Sá»¬: Má»i thay Ä‘á»•i Ä‘á»u Ä‘Æ°á»£c log                    â”‚
â”‚      â””â”€â”€ HanhDong + TuGiaTri + DenGiaTri + GhiChu              â”‚
â”‚                                                                  â”‚
â”‚   4ï¸âƒ£ THÃ”NG BÃO: Gá»­i cho ngÆ°á»i liÃªn quan                        â”‚
â”‚      â””â”€â”€ Äá»ƒ há» biáº¿t vÃ  xá»­ lÃ½ tiáº¿p                              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Pháº§n 5: ÄÃ¡nh GiÃ¡ & Dashboard

### 5.1. ÄÃ¡nh GiÃ¡ YÃªu Cáº§u

#### 5.1.1. Quyáº¿t Äá»‹nh ÄÃ£ Thá»‘ng Nháº¥t

| #    | CÃ¢u há»i                     | Quyáº¿t Ä‘á»‹nh                                                      |
| ---- | --------------------------- | --------------------------------------------------------------- |
| Q5.1 | ÄÃ¡nh giÃ¡ nhiá»u láº§n?         | **ÄÃ¡nh giÃ¡ = Tá»± Ä‘á»™ng Ä‘Ã³ng**. Muá»‘n Ä‘Ã¡nh giÃ¡ láº¡i â†’ Má»Ÿ láº¡i yÃªu cáº§u |
| Q5.2 | Ai tháº¥y Ä‘Ã¡nh giÃ¡?           | **CÃ´ng khai táº¥t cáº£** (NguoiGui, NguoiXuLy, DieuPhoi, Admin)     |
| Q5.3 | Nháº­n xÃ©t báº¯t buá»™c?          | **Báº¯t buá»™c khi < 3â­** (1-2 sao pháº£i nháº­p lÃ½ do)                |
| -    | ÄÃ¡nh giÃ¡ báº¯t buá»™c?          | **KhÃ´ng** - tÃ¹y chá»n                                            |
| -    | Thang Ä‘iá»ƒm                  | **1-5 sao**                                                     |
| -    | Máº·c Ä‘á»‹nh khi khÃ´ng Ä‘Ã¡nh giÃ¡ | **5â­** (khuyáº¿n khÃ­ch Ä‘Ã¡nh giÃ¡ náº¿u khÃ´ng hÃ i lÃ²ng)              |

#### 5.1.2. Flow ÄÃ¡nh GiÃ¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLOW ÄÃNH GIÃ YÃŠU Cáº¦U                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   DA_HOAN_THANH                                                  â”‚
â”‚        â”‚                                                         â”‚
â”‚        â”œâ”€â”€â”€ [ÄÃ¡nh giÃ¡] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º DA_DONG (tá»± Ä‘á»™ng)            â”‚
â”‚        â”‚     â”‚                                                   â”‚
â”‚        â”‚     â”œâ”€â”€ Chá»n sá»‘ sao (1-5)                              â”‚
â”‚        â”‚     â”œâ”€â”€ Náº¿u < 3â­: Báº®T BUá»˜C nháº­p nháº­n xÃ©t              â”‚
â”‚        â”‚     â””â”€â”€ TB cho NguoiXuLy: "â­â­â­â­â­ + nháº­n xÃ©t"        â”‚
â”‚        â”‚                                                         â”‚
â”‚        â”œâ”€â”€â”€ [ÄÃ³ng thá»§ cÃ´ng] â”€â”€â”€â”€â”€â–º DA_DONG (máº·c Ä‘á»‹nh 5â­)       â”‚
â”‚        â”‚                                                         â”‚
â”‚        â””â”€â”€â”€ [3 ngÃ y khÃ´ng tÆ°Æ¡ng tÃ¡c] â–º DA_DONG (auto, 5â­)      â”‚
â”‚                                                                  â”‚
â”‚   DA_DONG                                                        â”‚
â”‚        â”‚                                                         â”‚
â”‚        â””â”€â”€â”€ [Má»Ÿ láº¡i trong 7 ngÃ y] â–º DA_HOAN_THANH               â”‚
â”‚              â””â”€â”€ CÃ³ thá»ƒ Ä‘Ã¡nh giÃ¡ láº¡i (ghi Ä‘Ã¨ Ä‘Ã¡nh giÃ¡ cÅ©)       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.1.3. Visibility ÄÃ¡nh GiÃ¡

| Vai trÃ²         | Tháº¥y Ä‘Ã¡nh giÃ¡? | Ghi chÃº                     |
| --------------- | -------------- | --------------------------- |
| **NgÆ°á»i gá»­i**   | âœ…             | ÄÃ¡nh giÃ¡ cá»§a chÃ­nh mÃ¬nh     |
| **NgÆ°á»i xá»­ lÃ½** | âœ…             | Äá»ƒ biáº¿t feedback, cáº£i thiá»‡n |
| **Äiá»u phá»‘i**   | âœ…             | GiÃ¡m sÃ¡t cháº¥t lÆ°á»£ng         |
| **Admin**       | âœ…             | Quáº£n lÃ½ toÃ n há»‡ thá»‘ng       |

### 5.2. Dashboard YÃªu Cáº§u (Trang RiÃªng)

> **URL**: `/yeucau/dashboard`

#### 5.2.1. Quyá»n Truy Cáº­p

| Vai trÃ²              | Truy cáº­p? | Pháº¡m vi dá»¯ liá»‡u   |
| -------------------- | --------- | ----------------- |
| **Admin/SuperAdmin** | âœ…        | ToÃ n há»‡ thá»‘ng     |
| **Quáº£n lÃ½ khoa**     | âœ…        | Chá»‰ khoa cá»§a mÃ¬nh |
| **Äiá»u phá»‘i**        | âœ…        | Chá»‰ khoa cá»§a mÃ¬nh |
| **NhÃ¢n viÃªn thÆ°á»ng** | âŒ        | -                 |

#### 5.2.2. Metrics Dashboard

|  #  | Metric                 | MÃ´ táº£                                     | Hiá»ƒn thá»‹         |
| :-: | ---------------------- | ----------------------------------------- | ---------------- |
|  1  | **Tá»•ng YC trong ká»³**   | Sá»‘ yÃªu cáº§u táº¡o má»›i trong khoáº£ng thá»i gian | Sá»‘               |
|  2  | **Äang chá» xá»­ lÃ½**     | TrangThai = MOI                           | Sá»‘ + Badge       |
|  3  | **Äang xá»­ lÃ½**         | TrangThai = DANG_XU_LY                    | Sá»‘               |
|  4  | **ÄÃ£ hoÃ n thÃ nh**      | DA_HOAN_THANH + DA_DONG                   | Sá»‘               |
|  5  | **Bá»‹ tá»« chá»‘i**         | TrangThai = TU_CHOI                       | Sá»‘               |
|  6  | **Tá»· lá»‡ Ä‘Ãºng háº¹n**     | % hoÃ n thÃ nh trÆ°á»›c ThoiGianHen            | % + Progress bar |
|  7  | **Äiá»ƒm hÃ i lÃ²ng TB**   | Trung bÃ¬nh sá»‘ sao (1-5)                   | â­ x.x           |
|  8  | **Thá»i gian xá»­ lÃ½ TB** | TB (NgayHoanThanh - NgayTiepNhan)         | x giá»/phÃºt       |
|  9  | **Top NV xá»­ lÃ½ nhiá»u** | Ranking NV theo sá»‘ lÆ°á»£ng xá»­ lÃ½            | Table            |
| 10  | **Biá»ƒu Ä‘á»“ xu hÆ°á»›ng**   | Line chart sá»‘ YC theo ngÃ y/tuáº§n           | Chart            |

#### 5.2.3. Filter Dashboard

| Filter               | Options                           | Ghi chÃº                                         |
| -------------------- | --------------------------------- | ----------------------------------------------- |
| **Khoa**             | Dropdown danh sÃ¡ch khoa           | Admin: táº¥t cáº£, Quáº£n lÃ½/Äiá»u phá»‘i: chá»‰ khoa mÃ¬nh |
| **Khoáº£ng thá»i gian** | Tuáº§n / ThÃ¡ng / QuÃ½ / NÄƒm / Custom | DateRange picker                                |
| **Loáº¡i yÃªu cáº§u**     | Dropdown tá»« DanhMucYeuCau         | Theo khoa Ä‘Ã£ chá»n                               |

#### 5.2.4. Mockup UI Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š DASHBOARD YÃŠU Cáº¦U                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ğŸ” Filter: [Khoa: CNTT â–¼] [Thá»i gian: ThÃ¡ng 11/2025 â–¼]        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Tá»”NG   â”‚ â”‚ CHá»œ XL â”‚ â”‚ ÄANG   â”‚ â”‚ HOÃ€N   â”‚ â”‚ Tá»ª     â”‚        â”‚
â”‚  â”‚        â”‚ â”‚        â”‚ â”‚ Xá»¬ LÃ  â”‚ â”‚ THÃ€NH  â”‚ â”‚ CHá»I   â”‚        â”‚
â”‚  â”‚  156   â”‚ â”‚  ğŸ”´ 12 â”‚ â”‚   28   â”‚ â”‚  110   â”‚ â”‚   6    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ğŸ“ˆ XU HÆ¯á»šNG YÃŠU Cáº¦U   â”‚ â”‚ ğŸ“Š THá»NG KÃŠ            â”‚          â”‚
â”‚  â”‚                        â”‚ â”‚                        â”‚          â”‚
â”‚  â”‚    ^                   â”‚ â”‚ Tá»· lá»‡ Ä‘Ãºng háº¹n: 85%   â”‚          â”‚
â”‚  â”‚   /|\                  â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘       â”‚          â”‚
â”‚  â”‚  / | \    /\          â”‚ â”‚                        â”‚          â”‚
â”‚  â”‚ /  |  \  /  \         â”‚ â”‚ Äiá»ƒm hÃ i lÃ²ng: â­ 4.3  â”‚          â”‚
â”‚  â”‚â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º     â”‚ â”‚ TG xá»­ lÃ½ TB: 45 phÃºt   â”‚          â”‚
â”‚  â”‚ T2 T3 T4 T5 T6 T7 CN  â”‚ â”‚                        â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                  â”‚
â”‚  ğŸ† TOP NHÃ‚N VIÃŠN Xá»¬ LÃ                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ #  â”‚ TÃªn           â”‚ Sá»‘ YC â”‚ ÄÃºng háº¹n â”‚ Äiá»ƒm TB â”‚ TG TB â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ 1  â”‚ Nguyá»…n VÄƒn A  â”‚  45   â”‚   95%    â”‚  â­4.8  â”‚ 30ph  â”‚    â”‚
â”‚  â”‚ 2  â”‚ Tráº§n Thá»‹ B    â”‚  38   â”‚   89%    â”‚  â­4.5  â”‚ 42ph  â”‚    â”‚
â”‚  â”‚ 3  â”‚ LÃª VÄƒn C      â”‚  27   â”‚   81%    â”‚  â­4.2  â”‚ 55ph  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3. Dashboard Review Ticket (Trong Trang KPI)

**Má»¥c Ä‘Ã­ch**: Há»— trá»£ quáº£n lÃ½ **review nhanh** hiá»‡u suáº¥t xá»­ lÃ½ yÃªu cáº§u cá»§a nhÃ¢n viÃªn khi cháº¥m Ä‘iá»ƒm KPI.

#### 5.2.1. Vá»‹ TrÃ­ UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DIALOG CHáº¤M ÄIá»‚M KPI - NHÃ‚N VIÃŠN X                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ğŸ“‹ Nhiá»‡m vá»¥ 1: Há»— trá»£ ká»¹ thuáº­t           [Äá»™ khÃ³: 7]  âœ“      â”‚
â”‚   â–¼ (expand)                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  [Tab: TiÃªu chÃ­] [Tab: CÃ´ng viá»‡c] [Tab: Xá»­ lÃ½ yÃªu cáº§u] â”‚   â”‚
â”‚   â”‚                                    â–²                    â”‚   â”‚
â”‚   â”‚                                    â”‚                    â”‚   â”‚
â”‚   â”‚                               TAB Má»šI                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚   ğŸ“‹ Nhiá»‡m vá»¥ 2: ...                                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Tab "Xá»­ lÃ½ yÃªu cáº§u"** náº±m trong expand row cá»§a má»—i nhiá»‡m vá»¥ thÆ°á»ng quy, song song vá»›i tab "CÃ´ng viá»‡c" Ä‘Ã£ cÃ³.

#### 5.2.2. Metrics Hiá»ƒn Thá»‹

|  #  | Metric                 | MÃ´ táº£                             | Hiá»ƒn thá»‹   |
| :-: | ---------------------- | --------------------------------- | ---------- |
|  1  | **Sá»‘ yÃªu cáº§u nháº­n**    | Tá»•ng ticket NV xá»­ lÃ½ trong chu ká»³ | Sá»‘         |
|  2  | **Sá»‘ hoÃ n thÃ nh**      | DA_HOAN_THANH + DA_DONG           | Sá»‘         |
|  3  | **Tá»· lá»‡ Ä‘Ãºng háº¹n**     | % hoÃ n thÃ nh trÆ°á»›c ThoiGianHen    | %          |
|  4  | **Äiá»ƒm hÃ i lÃ²ng TB**   | Trung bÃ¬nh sá»‘ sao (1-5)           | â­ x.x     |
|  5  | **Thá»i gian xá»­ lÃ½ TB** | TB (NgayHoanThanh - NgayTiepNhan) | x giá»/phÃºt |

#### 5.2.3. Filter Dá»¯ Liá»‡u

| TiÃªu chÃ­              | GiÃ¡ trá»‹                                     |
| --------------------- | ------------------------------------------- |
| **Pháº¡m vi thá»i gian** | Theo chu ká»³ Ä‘Ã¡nh giÃ¡ KPI Ä‘ang cháº¥m          |
| **NhÃ¢n viÃªn**         | Ticket mÃ  NV lÃ  `NguoiXuLyID` (ngÆ°á»i xá»­ lÃ½) |

#### 5.2.4. Mockup UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š THá»NG KÃŠ Xá»¬ LÃ YÃŠU Cáº¦U - Chu ká»³: ThÃ¡ng 11/2025             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ YC NHáº¬N  â”‚ â”‚ HOÃ€N     â”‚ â”‚ ÄÃšNG Háº¸N â”‚ â”‚ HÃ€I LÃ’NG â”‚ â”‚ TG Xá»¬  â”‚â”‚
â”‚  â”‚          â”‚ â”‚ THÃ€NH    â”‚ â”‚          â”‚ â”‚          â”‚ â”‚ LÃ TB  â”‚â”‚
â”‚  â”‚    12    â”‚ â”‚    10    â”‚ â”‚   83%    â”‚ â”‚  â­ 4.5  â”‚ â”‚ 45ph   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  ğŸ“‹ Danh sÃ¡ch chi tiáº¿t (cÃ³ thá»ƒ collapse)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ MÃ£       â”‚ Loáº¡i         â”‚ Tráº¡ng thÃ¡i â”‚ ÄÃ¡nh giÃ¡ â”‚ TG    â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ YC001    â”‚ Sá»­a PM       â”‚ âœ… ÄÃ£ Ä‘Ã³ng â”‚ â­â­â­â­â­ â”‚ 30ph  â”‚    â”‚
â”‚  â”‚ YC002    â”‚ Reset MK     â”‚ âœ… ÄÃ£ Ä‘Ã³ng â”‚ â­â­â­â­   â”‚ 15ph  â”‚    â”‚
â”‚  â”‚ YC003    â”‚ Láº¯p mÃ¡y      â”‚ ğŸŸ  Äang XL â”‚ -        â”‚ -     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.4. CÃ´ng Thá»©c TÃ­nh Metrics

```javascript
// 1. Sá»‘ yÃªu cáº§u nháº­n
const soYeuCauNhan = YeuCau.count({
  NguoiXuLyID: nhanVienId,
  NgayTiepNhan: { $gte: chuKy.NgayBatDau, $lte: chuKy.NgayKetThuc },
});

// 2. Sá»‘ hoÃ n thÃ nh
const soHoanThanh = YeuCau.count({
  NguoiXuLyID: nhanVienId,
  TrangThai: { $in: ["DA_HOAN_THANH", "DA_DONG"] },
  NgayHoanThanh: { $gte: chuKy.NgayBatDau, $lte: chuKy.NgayKetThuc },
});

// 3. Tá»· lá»‡ Ä‘Ãºng háº¹n
const soDungHen = YeuCau.count({
  ...filterHoanThanh,
  $expr: { $lte: ["$NgayHoanThanh", "$ThoiGianHen"] },
});
const tyLeDungHen = (soDungHen / soHoanThanh) * 100;

// 4. Äiá»ƒm hÃ i lÃ²ng TB
const diemTB = YeuCau.aggregate([
  { $match: { NguoiXuLyID: nhanVienId, "DanhGia.SoSao": { $exists: true } } },
  { $group: { _id: null, avg: { $avg: "$DanhGia.SoSao" } } },
]);

// 5. Thá»i gian xá»­ lÃ½ TB (phÃºt)
const tgXuLyTB = YeuCau.aggregate([
  { $match: filterHoanThanh },
  {
    $project: {
      tgXuLy: { $subtract: ["$NgayHoanThanh", "$NgayTiepNhan"] },
    },
  },
  { $group: { _id: null, avg: { $avg: "$tgXuLy" } } },
]);
```

---

## Lá»‹ch Sá»­ YÃªu Cáº§u (LichSuYeuCau)

Má»i hÃ nh Ä‘á»™ng trÃªn yÃªu cáº§u Ä‘á»u Ä‘Æ°á»£c ghi láº¡i:

### Danh SÃ¡ch CÃ¡c HÃ nh Äá»™ng

| HanhDong          | MÃ´ táº£                    | Ai thá»±c hiá»‡n                 |
| ----------------- | ------------------------ | ---------------------------- |
| TAO_MOI           | Táº¡o yÃªu cáº§u má»›i          | NgÆ°á»i gá»­i                    |
| TIEP_NHAN         | Tiáº¿p nháº­n xá»­ lÃ½          | Äiá»u phá»‘i / NV Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh |
| TU_CHOI           | Tá»« chá»‘i yÃªu cáº§u          | Äiá»u phá»‘i / NV Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh |
| DIEU_PHOI         | Äiá»u phá»‘i cho NV khÃ¡c    | Äiá»u phá»‘i                    |
| GUI_VE_KHOA       | Gá»­i vá» khoa (tá»« cÃ¡ nhÃ¢n) | NV Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh / Ä‘iá»u phá»‘i |
| HUY_TIEP_NHAN     | Há»§y tiáº¿p nháº­n, vá» MOI    | NgÆ°á»i xá»­ lÃ½                  |
| DOI_THOI_GIAN_HEN | Thay Ä‘á»•i thá»i gian háº¹n   | NgÆ°á»i xá»­ lÃ½                  |
| HOAN_THANH        | BÃ¡o hoÃ n thÃ nh           | NgÆ°á»i xá»­ lÃ½                  |
| MO_LAI            | Má»Ÿ láº¡i yÃªu cáº§u           | NgÆ°á»i gá»­i / NgÆ°á»i xá»­ lÃ½      |
| DANH_GIA          | ÄÃ¡nh giÃ¡ (1-5 sao)       | NgÆ°á»i gá»­i                    |
| DONG              | ÄÃ³ng yÃªu cáº§u             | NgÆ°á»i gá»­i / NgÆ°á»i xá»­ lÃ½      |
| TU_DONG_DONG      | Tá»± Ä‘á»™ng Ä‘Ã³ng sau 3 ngÃ y  | Há»‡ thá»‘ng                     |
| APPEAL            | Má»Ÿ láº¡i tá»« TU_CHOI        | NgÆ°á»i gá»­i                    |
| THEM_BINH_LUAN    | ThÃªm bÃ¬nh luáº­n           | Táº¥t cáº£                       |
| THEM_FILE         | ThÃªm file                | Táº¥t cáº£                       |
| XOA               | XÃ³a yÃªu cáº§u (khi MOI)    | NgÆ°á»i gá»­i                    |

### VÃ­ Dá»¥ Lá»‹ch Sá»­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Lá»ŠCH Sá»¬ YÃŠU Cáº¦U #YC2025000123                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 08:00 â”‚ BS. Nguyá»…n                              â”‚
â”‚   â””â”€â”€ TAO_MOI: Táº¡o yÃªu cáº§u, gá»­i Ä‘áº¿n Anh Tuáº¥n (CNTT)            â”‚
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 08:15 â”‚ Anh Tuáº¥n                                â”‚
â”‚   â””â”€â”€ GUI_VE_KHOA: "Äang báº­n há»p, chuyá»ƒn vá» khoa xá»­ lÃ½"        â”‚
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 08:30 â”‚ Chá»‹ HÆ°Æ¡ng (Äiá»u phá»‘i)                   â”‚
â”‚   â””â”€â”€ DIEU_PHOI: Äiá»u phá»‘i cho Anh Minh                         â”‚
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 08:35 â”‚ Anh Minh                                â”‚
â”‚   â””â”€â”€ TIEP_NHAN: Tiáº¿p nháº­n, háº¹n hoÃ n thÃ nh 10:00               â”‚
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 09:00 â”‚ Anh Minh                                â”‚
â”‚   â””â”€â”€ THEM_BINH_LUAN: "Äang kiá»ƒm tra mÃ¡y..."                   â”‚
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 09:45 â”‚ Anh Minh                                â”‚
â”‚   â””â”€â”€ HOAN_THANH: BÃ¡o hoÃ n thÃ nh                                â”‚
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 10:00 â”‚ BS. Nguyá»…n                              â”‚
â”‚   â””â”€â”€ DANH_GIA: â­â­â­â­â­ "Xá»­ lÃ½ nhanh, cáº£m Æ¡n!"               â”‚
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 10:05 â”‚ BS. Nguyá»…n                              â”‚
â”‚   â””â”€â”€ DONG: ÄÃ³ng yÃªu cáº§u                                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### VÃ­ Dá»¥ Flow Phá»©c Táº¡p (Appeal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Lá»ŠCH Sá»¬ YÃŠU Cáº¦U #YC2025000456 (cÃ³ Appeal)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 08:00 â”‚ BS. Nguyá»…n                              â”‚
â”‚   â””â”€â”€ TAO_MOI: Táº¡o yÃªu cáº§u sá»­a mÃ¡y tÃ­nh                        â”‚
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 08:30 â”‚ Chá»‹ HÆ°Æ¡ng (Äiá»u phá»‘i)                   â”‚
â”‚   â””â”€â”€ TU_CHOI: "KhÃ´ng thuá»™c pháº¡m vi xá»­ lÃ½"                     â”‚
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 09:00 â”‚ BS. Nguyá»…n                              â”‚
â”‚   â””â”€â”€ APPEAL: "MÃ¡y nÃ y do khoa CNTT cáº¥p, cáº§n há»— trá»£"           â”‚
â”‚                                                                  â”‚
â”‚   ğŸ• 28/11/2025 09:15 â”‚ Chá»‹ HÆ°Æ¡ng (Äiá»u phá»‘i)                   â”‚
â”‚   â””â”€â”€ TIEP_NHAN: Xem xÃ©t láº¡i, tiáº¿p nháº­n xá»­ lÃ½                  â”‚
â”‚                                                                  â”‚
â”‚   ... (tiáº¿p tá»¥c flow bÃ¬nh thÆ°á»ng)                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Pháº§n 6: Danh SÃ¡ch Notification Templates

### 6.1. Tá»•ng Quan

|  #  | Type                   | MÃ´ táº£                          | Gá»­i Ä‘áº¿n                                     |
| :-: | ---------------------- | ------------------------------ | ------------------------------------------- |
|  1  | `YEUCAU_MOI_KHOA`      | YÃªu cáº§u má»›i gá»­i Ä‘áº¿n khoa       | NgÆ°á»i Ä‘iá»u phá»‘i                             |
|  2  | `YEUCAU_MOI_CANHAN`    | YÃªu cáº§u má»›i gá»­i Ä‘áº¿n cÃ¡ nhÃ¢n    | NV Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh                            |
|  3  | `YEUCAU_DIEU_PHOI`     | ÄÆ°á»£c Ä‘iá»u phá»‘i xá»­ lÃ½           | NV Ä‘Æ°á»£c Ä‘iá»u phá»‘i + NgÆ°á»i gá»­i               |
|  4  | `YEUCAU_TIEP_NHAN`     | YÃªu cáº§u Ä‘Ã£ Ä‘Æ°á»£c tiáº¿p nháº­n      | NgÆ°á»i gá»­i                                   |
|  5  | `YEUCAU_TU_CHOI`       | YÃªu cáº§u bá»‹ tá»« chá»‘i             | NgÆ°á»i gá»­i                                   |
|  6  | `YEUCAU_HOAN_THANH`    | YÃªu cáº§u Ä‘Ã£ hoÃ n thÃ nh          | NgÆ°á»i gá»­i                                   |
|  7  | `YEUCAU_DONG`          | YÃªu cáº§u Ä‘Ã£ Ä‘Ã³ng                | NgÆ°á»i gá»­i + NgÆ°á»i xá»­ lÃ½                     |
|  8  | `YEUCAU_MO_LAI`        | YÃªu cáº§u Ä‘Æ°á»£c má»Ÿ láº¡i            | Äá»‘i phÆ°Æ¡ng (ai má»Ÿ thÃ¬ TB ngÆ°á»i cÃ²n láº¡i)     |
|  9  | `YEUCAU_APPEAL`        | NgÆ°á»i gá»­i khiáº¿u náº¡i            | NgÆ°á»i Ä‘iá»u phá»‘i                             |
| 10  | `YEUCAU_GUI_VE_KHOA`   | NV gá»­i vá» khoa                 | NgÆ°á»i Ä‘iá»u phá»‘i                             |
| 11  | `YEUCAU_HUY_TIEP_NHAN` | Há»§y tiáº¿p nháº­n                  | NgÆ°á»i gá»­i + NgÆ°á»i Ä‘iá»u phá»‘i                 |
| 12  | `YEUCAU_COMMENT`       | CÃ³ bÃ¬nh luáº­n má»›i               | NgÆ°á»i gá»­i + NgÆ°á»i xá»­ lÃ½ (trá»« ngÆ°á»i comment) |
| 13  | `YEUCAU_NHAC_LAI`      | NgÆ°á»i gá»­i nháº¯c láº¡i             | NgÆ°á»i Ä‘iá»u phá»‘i                             |
| 14  | `YEUCAU_BAO_QUAN_LY`   | NgÆ°á»i gá»­i bÃ¡o quáº£n lÃ½          | Quáº£n lÃ½ khoa                                |
| 15  | `YEUCAU_SUA_DICH`      | NgÆ°á»i gá»­i Ä‘á»•i Ä‘Ã­ch yÃªu cáº§u     | ÄÃ­ch cÅ© + ÄÃ­ch má»›i                          |
| 16  | `YEUCAU_XU_LY_TIEP`    | NgÆ°á»i xá»­ lÃ½ yÃªu cáº§u xá»­ lÃ½ tiáº¿p | NgÆ°á»i gá»­i                                   |
| 17  | `YEUCAU_DANH_GIA`      | ÄÃ¡nh giÃ¡ yÃªu cáº§u (kÃ¨m sá»‘ sao)  | NgÆ°á»i xá»­ lÃ½                                 |

### 6.2. Chi Tiáº¿t Templates

#### 6.2.1. YEUCAU_MOI_KHOA

```javascript
{
  type: "YEUCAU_MOI_KHOA",
  name: "YÃªu cáº§u má»›i gá»­i Ä‘áº¿n khoa",
  category: "yeucau",
  titleTemplate: "ğŸ“© YÃªu cáº§u má»›i - {{maYeuCau}}",
  bodyTemplate: '{{nguoiGui}} gá»­i yÃªu cáº§u "{{tieuDe}}" Ä‘áº¿n {{tenKhoa}}',
  icon: "inbox",
  defaultChannels: ["inapp"],
  defaultPriority: "high",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiGui", "tieuDe", "tenKhoa", "yeuCauId"],
}
```

#### 6.2.2. YEUCAU_MOI_CANHAN

```javascript
{
  type: "YEUCAU_MOI_CANHAN",
  name: "YÃªu cáº§u má»›i gá»­i Ä‘áº¿n cÃ¡ nhÃ¢n",
  category: "yeucau",
  titleTemplate: "ğŸ“© YÃªu cáº§u má»›i - {{maYeuCau}}",
  bodyTemplate: '{{nguoiGui}} gá»­i yÃªu cáº§u "{{tieuDe}}" trá»±c tiáº¿p cho báº¡n',
  icon: "person",
  defaultChannels: ["inapp"],
  defaultPriority: "high",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiGui", "tieuDe", "yeuCauId"],
}
```

#### 6.2.3. YEUCAU_DIEU_PHOI

```javascript
{
  type: "YEUCAU_DIEU_PHOI",
  name: "ÄÆ°á»£c Ä‘iá»u phá»‘i xá»­ lÃ½ yÃªu cáº§u",
  category: "yeucau",
  titleTemplate: "ğŸ“‹ ÄÆ°á»£c phÃ¢n cÃ´ng - {{maYeuCau}}",
  bodyTemplate: '{{nguoiDieuPhoi}} Ä‘iá»u phá»‘i báº¡n xá»­ lÃ½ "{{tieuDe}}"',
  icon: "assignment_ind",
  defaultChannels: ["inapp"],
  defaultPriority: "high",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiDieuPhoi", "tieuDe", "yeuCauId"],
}
```

#### 6.2.4. YEUCAU_TIEP_NHAN

```javascript
{
  type: "YEUCAU_TIEP_NHAN",
  name: "YÃªu cáº§u Ä‘Ã£ Ä‘Æ°á»£c tiáº¿p nháº­n",
  category: "yeucau",
  titleTemplate: "âœ… ÄÃ£ tiáº¿p nháº­n - {{maYeuCau}}",
  bodyTemplate: '{{nguoiXuLy}} Ä‘Ã£ tiáº¿p nháº­n yÃªu cáº§u "{{tieuDe}}", háº¹n hoÃ n thÃ nh {{thoiGianHen}}',
  icon: "check_circle",
  defaultChannels: ["inapp"],
  defaultPriority: "normal",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiXuLy", "tieuDe", "thoiGianHen", "yeuCauId"],
}
```

#### 6.2.5. YEUCAU_TU_CHOI

```javascript
{
  type: "YEUCAU_TU_CHOI",
  name: "YÃªu cáº§u bá»‹ tá»« chá»‘i",
  category: "yeucau",
  titleTemplate: "âŒ Tá»« chá»‘i - {{maYeuCau}}",
  bodyTemplate: 'YÃªu cáº§u "{{tieuDe}}" bá»‹ tá»« chá»‘i: {{lyDo}}',
  icon: "cancel",
  defaultChannels: ["inapp"],
  defaultPriority: "normal",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "tieuDe", "lyDo", "yeuCauId"],
}
```

#### 6.2.6. YEUCAU_HOAN_THANH

```javascript
{
  type: "YEUCAU_HOAN_THANH",
  name: "YÃªu cáº§u Ä‘Ã£ hoÃ n thÃ nh",
  category: "yeucau",
  titleTemplate: "ğŸ‰ HoÃ n thÃ nh - {{maYeuCau}}",
  bodyTemplate: '{{nguoiXuLy}} Ä‘Ã£ xá»­ lÃ½ xong yÃªu cáº§u "{{tieuDe}}". Vui lÃ²ng Ä‘Ã¡nh giÃ¡!',
  icon: "task_alt",
  defaultChannels: ["inapp"],
  defaultPriority: "normal",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiXuLy", "tieuDe", "yeuCauId"],
}
```

#### 6.2.7. YEUCAU_COMMENT

```javascript
{
  type: "YEUCAU_COMMENT",
  name: "BÃ¬nh luáº­n má»›i trong yÃªu cáº§u",
  category: "yeucau",
  titleTemplate: "ğŸ’¬ BÃ¬nh luáº­n má»›i - {{maYeuCau}}",
  bodyTemplate: '{{nguoiBinhLuan}} Ä‘Ã£ bÃ¬nh luáº­n: "{{noiDungPreview}}"',
  icon: "comment",
  defaultChannels: ["inapp"],
  defaultPriority: "normal",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiBinhLuan", "noiDungPreview", "yeuCauId"],
}
```

#### 6.2.8. YEUCAU_NHAC_LAI

```javascript
{
  type: "YEUCAU_NHAC_LAI",
  name: "NgÆ°á»i gá»­i nháº¯c láº¡i yÃªu cáº§u",
  category: "yeucau",
  titleTemplate: "ğŸ”” Nháº¯c láº¡i - {{maYeuCau}}",
  bodyTemplate: '{{nguoiGui}} nháº¯c láº¡i yÃªu cáº§u "{{tieuDe}}" (láº§n {{soLan}}/3 hÃ´m nay)',
  icon: "notifications_active",
  defaultChannels: ["inapp"],
  defaultPriority: "high",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiGui", "tieuDe", "soLan", "yeuCauId"],
}
```

#### 6.2.9. YEUCAU_BAO_QUAN_LY

```javascript
{
  type: "YEUCAU_BAO_QUAN_LY",
  name: "BÃ¡o quáº£n lÃ½ vá» yÃªu cáº§u",
  category: "yeucau",
  titleTemplate: "âš ï¸ BÃ¡o quáº£n lÃ½ - {{maYeuCau}}",
  bodyTemplate: '{{nguoiGui}} bÃ¡o cÃ¡o quáº£n lÃ½ vá» yÃªu cáº§u "{{tieuDe}}" chÆ°a Ä‘Æ°á»£c tiáº¿p nháº­n',
  icon: "warning",
  defaultChannels: ["inapp"],
  defaultPriority: "high",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiGui", "tieuDe", "yeuCauId"],
}
```

#### 6.2.10. YEUCAU_DANH_GIA

```javascript
{
  type: "YEUCAU_DANH_GIA",
  name: "ÄÃ¡nh giÃ¡ yÃªu cáº§u",
  description: "ThÃ´ng bÃ¡o khi ngÆ°á»i gá»­i Ä‘Ã¡nh giÃ¡ yÃªu cáº§u (kÃ¨m sá»‘ sao + nháº­n xÃ©t)",
  category: "yeucau",
  titleTemplate: "â­ ÄÃ¡nh giÃ¡ - {{maYeuCau}}",
  bodyTemplate: '{{nguoiGui}} Ä‘Ã¡nh giÃ¡ {{soSaoText}} cho yÃªu cáº§u "{{tieuDe}}"{{#if nhanXet}}: "{{nhanXet}}"{{/if}}',
  // VÃ­ dá»¥ output: "BS. Nguyá»…n Ä‘Ã¡nh giÃ¡ â­â­â­â­â­ cho yÃªu cáº§u "Sá»­a mÃ¡y tÃ­nh": "Xá»­ lÃ½ nhanh!""
  icon: "star",
  defaultChannels: ["inapp"],
  defaultPriority: "normal",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiGui", "tieuDe", "soSaoText", "yeuCauId"],
  // soSaoText = "â­â­â­â­â­" (render tá»« sá»‘ sao)
}
```

#### 6.2.11. YEUCAU_MO_LAI

```javascript
{
  type: "YEUCAU_MO_LAI",
  name: "YÃªu cáº§u Ä‘Æ°á»£c má»Ÿ láº¡i",
  category: "yeucau",
  titleTemplate: "ğŸ”„ Má»Ÿ láº¡i - {{maYeuCau}}",
  bodyTemplate: '{{nguoiMoLai}} má»Ÿ láº¡i yÃªu cáº§u "{{tieuDe}}": "{{lyDo}}"',
  icon: "replay",
  defaultChannels: ["inapp"],
  defaultPriority: "high",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiMoLai", "tieuDe", "lyDo", "yeuCauId"],
}
```

#### 6.2.12. YEUCAU_HUY_TIEP_NHAN

```javascript
{
  type: "YEUCAU_HUY_TIEP_NHAN",
  name: "Há»§y tiáº¿p nháº­n yÃªu cáº§u",
  category: "yeucau",
  titleTemplate: "â†©ï¸ Há»§y tiáº¿p nháº­n - {{maYeuCau}}",
  bodyTemplate: '{{nguoiXuLy}} Ä‘Ã£ há»§y tiáº¿p nháº­n yÃªu cáº§u "{{tieuDe}}", cáº§n ngÆ°á»i khÃ¡c xá»­ lÃ½',
  icon: "undo",
  defaultChannels: ["inapp"],
  defaultPriority: "high",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiXuLy", "tieuDe", "yeuCauId"],
}
```

#### 6.2.13. YEUCAU_XU_LY_TIEP

```javascript
{
  type: "YEUCAU_XU_LY_TIEP",
  name: "YÃªu cáº§u xá»­ lÃ½ tiáº¿p",
  category: "yeucau",
  titleTemplate: "ğŸ”„ Tiáº¿p tá»¥c xá»­ lÃ½ - {{maYeuCau}}",
  bodyTemplate: '{{nguoiXuLy}} Ä‘ang tiáº¿p tá»¥c xá»­ lÃ½ yÃªu cáº§u "{{tieuDe}}"',
  icon: "autorenew",
  defaultChannels: ["inapp"],
  defaultPriority: "normal",
  actionUrlTemplate: "/yeucau/{{yeuCauId}}",
  requiredVariables: ["maYeuCau", "nguoiXuLy", "tieuDe", "yeuCauId"],
}
```

### 6.3. Trigger Configuration

```javascript
// config/notificationTriggers.js - ThÃªm cÃ¡c triggers cho YeuCau

"YeuCau.taoMoi": {
  enabled: true,
  template: ["YEUCAU_MOI_KHOA", "YEUCAU_MOI_CANHAN"], // Chá»n theo LoaiNguoiNhan
  handler: "yeuCauTaoMoi",
  excludePerformer: true,
},

"YeuCau.dieuPhoi": {
  enabled: true,
  template: "YEUCAU_DIEU_PHOI",
  handler: "yeuCauDieuPhoi",
  excludePerformer: true,
},

"YeuCau.tiepNhan": {
  enabled: true,
  template: "YEUCAU_TIEP_NHAN",
  handler: "yeuCauTiepNhan",
  excludePerformer: true,
},

"YeuCau.tuChoi": {
  enabled: true,
  template: "YEUCAU_TU_CHOI",
  handler: "yeuCauTuChoi",
  excludePerformer: true,
},

"YeuCau.hoanThanh": {
  enabled: true,
  template: "YEUCAU_HOAN_THANH",
  handler: "yeuCauHoanThanh",
  excludePerformer: true,
},

"YeuCau.comment": {
  enabled: true,
  template: "YEUCAU_COMMENT",
  handler: "yeuCauComment",
  excludePerformer: true,
  // Chá»‰ gá»­i cho NguoiGuiID + NguoiXuLyID, KHÃ”NG gá»­i cho Ä‘iá»u phá»‘i
},

"YeuCau.nhacLai": {
  enabled: true,
  template: "YEUCAU_NHAC_LAI",
  handler: "yeuCauNhacLai",
  excludePerformer: true,
},

"YeuCau.baoQuanLy": {
  enabled: true,
  template: "YEUCAU_BAO_QUAN_LY",
  handler: "yeuCauBaoQuanLy",
  excludePerformer: true,
},
```

---

## TÃ i Liá»‡u LiÃªn Quan

- [02_DATABASE_SCHEMA.md](./02_DATABASE_SCHEMA.md) - Chi tiáº¿t schema
- [03_STATE_MACHINE.md](./03_STATE_MACHINE.md) - State machine & transitions
